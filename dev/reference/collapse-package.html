<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Advanced and Fast Data Transformation — collapse-package • collapse</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content=" Advanced and Fast Data Transformation — collapse-package"><meta name="description" content="collapse is a C/C++ based package for data transformation and statistical computing in R. Its aims are:
To facilitate complex data transformation, exploration and computing tasks in R.
To help make R code fast, flexible, parsimonious and programmer friendly.
It also implements a class-agnostic approach to data manipulation in R, supporting all major classes."><meta property="og:description" content="collapse is a C/C++ based package for data transformation and statistical computing in R. Its aims are:
To facilitate complex data transformation, exploration and computing tasks in R.
To help make R code fast, flexible, parsimonious and programmer friendly.
It also implements a class-agnostic approach to data manipulation in R, supporting all major classes."><meta property="og:image" content="https://sebkrantz.github.io/collapse/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collapse</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://sebkrantz.github.io/Rblog/">Blog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/rcollapse.bsky.social" aria-label="BlueSky"><span class="fa fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/collapse_R" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SebKrantz/collapse" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1><!-- % \code{collapse:} --> Advanced and Fast Data Transformation</h1>

      <div class="d-none name"><code>collapse-package.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><em>collapse</em> is a C/C++ based package for data transformation and statistical computing in R. Its aims are:</p><ul><li><p>To facilitate complex data transformation, exploration and computing tasks in R.</p></li>
<li><p>To help make R code fast, flexible, parsimonious and programmer friendly. <!-- % \emph{collapse} is a fast  %to facilitate (advanced) data manipulation in R   % To achieve the latter, --></p></li>
</ul><p>It also implements a <a href="https://sebkrantz.github.io/collapse/articles/collapse_object_handling.html">class-agnostic approach</a> to data manipulation in R, supporting all major classes.</p>
    </div>


    <div class="section level2">
    <h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a></h2>
    <p>Read the short <a href="https://sebkrantz.github.io/collapse/articles/collapse_documentation.html">vignette</a> on documentation resources, and check out the built in <a href="collapse-documentation.html">documentation</a>.  <!-- % A careful consideration of the \href{https://raw.githubusercontent.com/SebKrantz/cheatsheets/master/collapse.pdf}{cheat sheet} is recommended for quick starters. --></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><em>collapse</em> provides an integrated suite of statistical and data manipulation functions that greatly extend and enhance the capabilities of base R. In a nutshell, <em>collapse</em> provides:</p>
<ul><li><p>Fast C/C++ based (grouped, weighted) computations embedded in highly optimized R code.</p></li>
<li><p>More complex statistical, time series / panel data and recursive (list-processing) operations.</p></li>
<li><p>A flexible and generic approach supporting and preserving many R objects. <!-- % standard  % (S3 generic statistical functions, class/attribute preservation). % , compatibility with \emph{dplyr}, \emph{plm} and \emph{data.table} --></p></li>
<li><p>Optimized programming in standard and non-standard evaluation.</p></li>
</ul><p>The statistical functions in <em>collapse</em> are S3 generic with core methods for vectors, matrices and data frames, and internally support grouped and weighted computations carried out in C/C++. <!-- %Thus functions need only be called once for column-wise and/or grouped computations, providing a lot of extra speed and full support for sampling weights. --></p>




<p><!-- %The function \code{fgroup_by} can be used to efficiently create a grouped tibble inside dplyr-like chained calls (constructed with \emph{magrittr} pipes, fast manipulation functions like \code{fselect}, \code{fsubset}, \code{ftransform} and fast statistical functions). Thus \emph{collapse} enables optimized programming in both standard and non-standard evaluation. --></p>


<p>Functions and core methods seek to preserve object attributes (including column attributes such as variable labels), ensuring flexibility and effective workflows with a very broad range of R objects (including most time-series classes). See the <a href="https://sebkrantz.github.io/collapse/articles/collapse_object_handling.html">vignette</a> on <em>collapse</em>'s handling of R objects.</p>
<p>Missing values are efficiently skipped at C/C++ level. The package default is <code>na.rm = TRUE</code>. This can be changed using <code><a href="collapse-options.html">set_collapse(na.rm = FALSE)</a></code>. Missing weights are generally supported. <!-- % Core functionality and all statistical functions / computations are tested with &gt; 20,000 unit tests for Base R equivalence, exempting some improvements (e.g. \code{fsum(NA, na.rm = TRUE)} evaluates to \code{NA}, not 0 (unless \code{fill = TRUE}), similarly for \code{fmin} and \code{fmax}; no \code{NaN} values are generated from computations involving \code{NA} values). %Generic functions provide some \link[=collapse-options]{security} against silent swallowing of arguments. --></p>
<p><!-- %Hence they also handle various date and time series classes etc., and can easily be integreated into most approaches to data transformation. --></p>
<p><!-- %A global \code{option("collapse_unused_arg_action")} can be set to regulate the behavior when unused arguments are passed to a generic function. The default is to issue a warning. --></p>

<p><em>collapse</em> installs with a built-in hierarchical <a href="collapse-documentation.html">documentation</a> facilitating the use of the package. <!-- % The \href{https://sebkrantz.github.io/collapse/articles/index.html}{vignettes} are complimentary and also follow a more structured approach. % and \code{base/stats}. % extra methods warrant, provide ? --></p>



<p>The package is coded both in C and C++ and built with <em>Rcpp</em>, but also uses C/C++ functions from <em>data.table</em>, <em>kit</em>, <em>fixest</em>, <em>weights</em>, <em>stats</em> and <em>RcppArmadillo / RcppEigen</em>. <!-- % For the moment \emph{collapse} does not utilize low-level parallelism (such as OpenMP). --></p>


    </div>
    <div class="section level2">
    <h2 id="author-s-">Author(s)<a class="anchor" aria-label="anchor" href="#author-s-"></a></h2>
    <p><!-- % \author{ -->
<b>Maintainer</b>: Sebastian Krantz <a href="mailto:sebastian.krantz@graduateinstitute.ch">sebastian.krantz@graduateinstitute.ch</a></p>
    </div>
    <div class="section level2">
    <h2 id="developing-bug-reporting">Developing / Bug Reporting<a class="anchor" aria-label="anchor" href="#developing-bug-reporting"></a></h2>

<ul><li><p>Please report issues at <a href="https://github.com/SebKrantz/collapse/issues" class="external-link">https://github.com/SebKrantz/collapse/issues</a>.</p></li>
<li><p>Please send pull-requests to the 'development' branch of the repository.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Note: this set of examples is is certainly non-exhaustive and does not</span></span></span>
<span class="r-in"><span><span class="co">## showcase many recent features, but remains a very good starting point</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Let's start with some statistical programming</span></span></span>
<span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="select_replace_vars.html">num_vars</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>    <span class="co"># Saving numeric variables</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">$</span><span class="va">Species</span>      <span class="co"># Factor</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple statistics</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>               <span class="co"># vector</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5.843333</span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">qM</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>           <span class="co"># matrix (qM is a faster as.matrix)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Length  Sepal.Width Petal.Length  Petal.Width </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5.843333     3.057333     3.758000     1.199333 </span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>               <span class="co"># data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Length  Sepal.Width Petal.Length  Petal.Width </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5.843333     3.057333     3.758000     1.199333 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Preserving data structure</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">qM</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>     <span class="co"># Still a matrix</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     5.843333    3.057333        3.758    1.199333</span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">d</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>         <span class="co"># Still a data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.843333    3.057333        3.758    1.199333</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Weighted statistics, supported by most functions...</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="efficient-programming.html">fnrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">d</span>, w <span class="op">=</span> <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Length  Sepal.Width Petal.Length  Petal.Width </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5.839603     3.086031     3.721517     1.199056 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Grouped statistics...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> setosa            5.006       3.428        1.462       0.246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> versicolor        5.936       2.770        4.260       1.326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> virginica         6.588       2.974        5.552       2.026</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Groupwise-weighted statistics...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> setosa         5.035771    3.447914     1.453903   0.2653375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> versicolor     5.930956    2.795360     4.255436   1.3213342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> virginica      6.578510    2.990917     5.543057   2.0419757</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple Transformations...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fmode.html">fmode</a></span><span class="op">(</span><span class="va">d</span>, TRA <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span><span class="op">)</span>    <span class="co"># Replacing values with the mode</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            5           3          1.5         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            5           3          1.5         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            5           3          1.5         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            5           3          1.5         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            5           3          1.5         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            5           3          1.5         0.2</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">d</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>        <span class="co"># Subtracting the median</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         -0.7         0.5        -2.95        -1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         -0.9         0.0        -2.95        -1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         -1.1         0.2        -3.05        -1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         -1.2         0.1        -2.85        -1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         -0.8         0.6        -2.95        -1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         -0.4         0.9        -2.65        -0.9</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fsum.html">fsum</a></span><span class="op">(</span><span class="va">d</span>, TRA <span class="op">=</span> <span class="st">"%"</span><span class="op">)</span><span class="op">)</span>           <span class="co"># Computing percentages</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0.5818597   0.7631923    0.2483591   0.1111729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    0.5590416   0.6541648    0.2483591   0.1111729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    0.5362236   0.6977758    0.2306191   0.1111729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    0.5248146   0.6759703    0.2660990   0.1111729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    0.5704507   0.7849978    0.2483591   0.1111729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    0.6160867   0.8504143    0.3015789   0.2223457</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">d</span>, TRA <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span><span class="op">)</span>            <span class="co"># Dividing by the standard-deviation (scaling), etc...</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     6.158928    8.029986    0.7930671   0.2623854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     5.917402    6.882845    0.7930671   0.2623854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     5.675875    7.341701    0.7364195   0.2623854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     5.555112    7.112273    0.8497148   0.2623854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     6.038165    8.259414    0.7930671   0.2623854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6.521218    8.947698    0.9630101   0.5247707</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Weighted Transformations...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fnth_fmedian.html">fnth</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">0.75</span>, w <span class="op">=</span> <span class="va">w</span>, TRA <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Replacing by the weighted 3rd quartile</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          6.4         3.4          5.1         1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          6.4         3.4          5.1         1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          6.4         3.4          5.1         1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          6.4         3.4          5.1         1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          6.4         3.4          5.1         1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          6.4         3.4          5.1         1.8</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Grouped Transformations...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fvar_fsd.html">fvar</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Replacing values with the group variance</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     0.124249   0.1436898   0.03015918  0.01110612</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span><span class="op">)</span>         <span class="co"># Grouped scaling</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     14.46851    9.233260     8.061544    1.897793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     13.90112    7.914223     8.061544    1.897793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     13.33372    8.441838     7.485720    1.897793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     13.05003    8.178031     8.637369    1.897793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     14.18481    9.497068     8.061544    1.897793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     15.31960   10.288490     9.789018    3.795585</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fmin_fmax.html">fmin</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>        <span class="co"># Setting the minimum value in each species to 0</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0.8         1.2          0.4         0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0.6         0.7          0.4         0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0.4         0.9          0.3         0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0.3         0.8          0.5         0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.7         1.3          0.4         0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          1.1         1.6          0.7         0.3</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fsum.html">fsum</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span><span class="op">)</span>        <span class="co"># Dividing by the sum (proportions)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.02037555  0.02042007   0.01915185  0.01626016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.01957651  0.01750292   0.01915185  0.01626016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.01877747  0.01866978   0.01778386  0.01626016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   0.01837795  0.01808635   0.02051984  0.01626016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   0.01997603  0.02100350   0.01915185  0.01626016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   0.02157411  0.02275379   0.02325581  0.03252033</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>     <span class="co"># Groupwise de-median</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0.1         0.1         -0.1         0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         -0.1        -0.4         -0.1         0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         -0.3        -0.2         -0.2         0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         -0.4        -0.3          0.0         0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.0         0.2         -0.1         0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.4         0.5          0.2         0.2</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="ffirst_flast.html">ffirst</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, TRA <span class="op">=</span> <span class="st">"%%"</span><span class="op">)</span><span class="op">)</span>     <span class="co"># Taking modulus of first group-value, etc. ...</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0.0         0.0          0.0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          4.9         3.0          0.0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          4.7         3.2          1.3           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          4.6         3.1          0.1           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          5.0         0.1          0.0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.3         0.4          0.3           0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Grouped and weighted transformations...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, <span class="st">"/"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>         <span class="co"># weighted scaling</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     14.24438    9.301969     8.285370    1.776243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     13.68577    7.973117     8.285370    1.776243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     13.12717    8.504658     7.693558    1.776243</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, <span class="st">"-"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>     <span class="co"># subtracting the weighted group-median</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0.1         0.1         -0.1           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         -0.1        -0.4         -0.1           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         -0.3        -0.2         -0.2           0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fmode.html">fmode</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, <span class="st">"replace"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span> <span class="co"># replace with weighted statistical mode</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            5         3.4          1.4         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            5         3.4          1.4         0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            5         3.4          1.4         0.2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Some more advanced transformations...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fbetween</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>                             <span class="co"># Averaging (faster t.: fmean(d, TRA = "replace"))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.843333    3.057333        3.758    1.199333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     5.843333    3.057333        3.758    1.199333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     5.843333    3.057333        3.758    1.199333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     5.843333    3.057333        3.758    1.199333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5.843333    3.057333        3.758    1.199333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     5.843333    3.057333        3.758    1.199333</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>                              <span class="co"># Centering (faster than: fmean(d, TRA = "-"))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   -0.7433333  0.44266667       -2.358  -0.9993333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   -0.9433333 -0.05733333       -2.358  -0.9993333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   -1.1433333  0.14266667       -2.458  -0.9993333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   -1.2433333  0.04266667       -2.258  -0.9993333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   -0.8433333  0.54266667       -2.358  -0.9993333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   -0.4433333  0.84266667       -2.058  -0.7993333</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span><span class="op">)</span><span class="op">)</span>                        <span class="co"># Grouped and weighted (same as fmean(d, f, w, "-"))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.06422856  0.05208646  -0.05390312 -0.06533746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.13577144 -0.44791354  -0.05390312 -0.06533746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.33577144 -0.24791354  -0.15390312 -0.06533746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.43577144 -0.34791354   0.04609688 -0.06533746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -0.03577144  0.15208646  -0.05390312 -0.06533746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   0.36422856  0.45208646   0.24609688  0.13466254</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, mean <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span>              <span class="co"># Setting a custom mean</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.064229    5.052086     4.946097    4.934663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     4.864229    4.552086     4.946097    4.934663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     4.664229    4.752086     4.846097    4.934663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4.564229    4.652086     5.046097    4.934663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     4.964229    5.152086     4.946097    4.934663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     5.364229    5.452086     5.246097    5.134663</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, theta <span class="op">=</span> <span class="fl">0.76</span><span class="op">)</span><span class="op">)</span>          <span class="co"># Quasi-centering i.e. d - theta*fbetween(d, f, w)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1.2728137   0.8795857    0.2950336 -0.00165647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1.0728137   0.3795857    0.2950336 -0.00165647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    0.8728137   0.5795857    0.1950336 -0.00165647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    0.7728137   0.4795857    0.3950336 -0.00165647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    1.1728137   0.9795857    0.2950336 -0.00165647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    1.5728137   1.2795857    0.5950336  0.19834353</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, mean <span class="op">=</span> <span class="st">"overall.mean"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Preserving the overall mean of the data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.903831    3.138117     3.667614    1.133719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     5.703831    2.638117     3.667614    1.133719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     5.503831    2.838117     3.567614    1.133719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     5.403831    2.738117     3.767614    1.133719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5.803831    3.238117     3.667614    1.133719</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6.203831    3.538117     3.967614    1.333719</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>                               <span class="co"># Scaling and centering</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   -0.8976739  1.01560199    -1.335752   -1.311052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   -1.1392005 -0.13153881    -1.335752   -1.311052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   -1.3807271  0.32731751    -1.392399   -1.311052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   -1.5014904  0.09788935    -1.279104   -1.311052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   -1.0184372  1.24503015    -1.335752   -1.311052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   -0.5353840  1.93331463    -1.165809   -1.048667</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, mean <span class="op">=</span> <span class="fl">5</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>             <span class="co"># Custom scaling and centering</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    2.3069784    8.046806    0.9927451    1.066844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1.5823985    4.605384    0.9927451    1.066844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    0.8578187    5.981953    0.8228021    1.066844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    0.4955288    5.293668    1.1626881    1.066844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    1.9446885    8.735090    0.9927451    1.066844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    3.3938481   10.799944    1.5025740    1.854000</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, mean <span class="op">=</span> <span class="cn">FALSE</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>         <span class="co"># Mean preserving scaling</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     3.150312    6.104139  -0.24925490   -2.733823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2.425732    2.662717  -0.24925490   -2.733823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1.701152    4.039286  -0.41919786   -2.733823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1.338862    3.351001  -0.07931195   -2.733823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     2.788022    6.792424  -0.24925490   -2.733823</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     4.237181    8.857277   0.26057397   -1.946667</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span><span class="op">)</span><span class="op">)</span>                         <span class="co"># Grouped and weighted scaling and centering</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.17939134   0.1384305   -0.3190052   -0.580276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.37921170  -1.1904223   -0.3190052   -0.580276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.93781474  -0.6588812   -0.9108174   -0.580276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -1.21711626  -0.9246517    0.2728070   -0.580276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -0.09991018   0.4042010   -0.3190052   -0.580276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   1.01729590   1.2015127    1.4564313    1.195967</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, mean <span class="op">=</span> <span class="fl">5</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>       <span class="co"># Custom grouped and weighted scaling and centering</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.538174    5.415291     4.042984    3.259172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     3.862365    1.428733     4.042984    3.259172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     2.186556    3.023356     2.267548    3.259172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1.348651    2.226045     5.818421    3.259172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     4.700269    6.212603     4.042984    3.259172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     8.051888    8.604538     9.369294    8.587901</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, mean <span class="op">=</span> <span class="cn">FALSE</span>,            <span class="co"># Preserving group means</span></span></span>
<span class="r-in"><span>            sd <span class="op">=</span> <span class="st">"within.sd"</span><span class="op">)</span><span class="op">)</span>                <span class="co"># and setting group-sd to fsd(fwithin(d, f, w), w = w)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.124988    3.495163     1.323723   0.1488517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     4.847178    3.041600     1.323723   0.1488517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     4.569368    3.223025     1.082215   0.1488517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4.430462    3.132312     1.565231   0.1488517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     4.986083    3.585875     1.323723   0.1488517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     5.541704    3.858013     2.048247   0.5054182</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">f</span>, <span class="va">w</span>, mean <span class="op">=</span> <span class="st">"overall.mean"</span>,   <span class="co"># Full harmonization of group means and variances,</span></span></span>
<span class="r-in"><span>            sd <span class="op">=</span> <span class="st">"within.sd"</span><span class="op">)</span><span class="op">)</span>                <span class="co"># while preserving the level and scale of the data.</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5.928819    3.133280     3.591337    1.082571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     5.651009    2.679717     3.591337    1.082571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     5.373199    2.861142     3.349829    1.082571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     5.234294    2.770429     3.832845    1.082571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5.789914    3.223992     3.591337    1.082571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6.345535    3.496130     4.315861    1.439137</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="select_replace_vars.html">get_vars</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>                      <span class="co"># Use get_vars for fast selecting, gv is shortcut</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          5.1         3.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          4.9         3.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          4.7         3.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          4.6         3.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          5.0         3.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          5.4         3.9</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">fhdbetween</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Linear prediction with factors and covariates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     4.950107    3.389732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     4.950107    3.389732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     4.859513    3.374264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     5.040702    3.405199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     4.950107    3.389732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     5.220692    3.560823</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">fhdwithin</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Linear partialling out factors and covariates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Sepal.Length Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.14989286   0.1102684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.05010714  -0.3897316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.15951256  -0.1742640</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.44070173  -0.3051992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   0.04989286   0.2102684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   0.17930818   0.3391766</span>
<span class="r-in"><span><span class="fu"><a href="fsubset.html">ss</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>                            <span class="co"># Similarly fsubset/ss for fast subsetting rows</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Sepal.Length Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           5.1         3.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           4.9         3.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           4.7         3.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           4.6         3.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           5.0         3.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           5.4         3.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           4.6         3.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           5.0         3.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           4.4         2.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          4.9         3.1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple Time-Computations..</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="flag.html">flag</a></span><span class="op">(</span><span class="va">AirPassengers</span>, <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>                <span class="co"># One lead and three lags</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           F1  --  L1  L2  L3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Jan 1949 118 112  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Feb 1949 132 118 112  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mar 1949 129 132 118 112  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Apr 1949 121 129 132 118 112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> May 1949 135 121 129 132 118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Jun 1949 148 135 121 129 132</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">fdiff</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>,                     <span class="co"># Suitably lagged first and second differences</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/stats/time.html" class="external-link">frequency</a></span><span class="op">(</span><span class="va">EuStockMarkets</span><span class="op">)</span><span class="op">)</span>, diff <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = c(1991, 130) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = c(1991, 135) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 260 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          D1.DAX D2.DAX L260D1.DAX L260D2.DAX D1.SMI D2.SMI L260D1.SMI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496     NA     NA         NA         NA     NA     NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500 -15.12     NA         NA         NA   10.4     NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504  -7.12   8.00         NA         NA   -9.9  -20.3         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508  14.53  21.65         NA         NA    5.5   15.4         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          L260D2.SMI D1.CAC D2.CAC L260D1.CAC L260D2.CAC D1.FTSE D2.FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496         NA     NA     NA         NA         NA      NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500         NA  -22.3     NA         NA         NA    16.6      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504         NA  -32.5  -10.2         NA         NA   -12.0   -28.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508         NA   -9.9   22.6         NA         NA    22.2    34.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          L260D1.FTSE L260D2.FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">fdiff</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>, rho <span class="op">=</span> <span class="fl">0.87</span><span class="op">)</span><span class="op">)</span>        <span class="co"># Quasi-differences (x_t - rho*x_t-1)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = c(1991, 130) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = c(1991, 135) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 260 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DAX     SMI     CAC    FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496       NA      NA      NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500 196.6175 228.553 208.164 334.268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504 202.6519 209.605 195.065 307.826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508 223.3763 223.718 213.440 340.466</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.512 207.8552 221.433 237.053 335.452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.515 202.8108 204.258 215.203 305.111</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">fdiff</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>        <span class="co"># Log-differences</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = c(1991, 130) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = c(1991, 135) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 260 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   DAX          SMI          CAC         FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496           NA           NA           NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500 -0.009326550  0.006178360 -0.012658756  0.006770286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504 -0.004422175 -0.005880448 -0.018740638 -0.004889587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508  0.009003794  0.003271184 -0.005779182  0.009027020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.512 -0.001778217  0.001483372  0.008743353  0.005771847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.515 -0.004676712 -0.008933417 -0.005120160 -0.007230164</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fgrowth.html">fgrowth</a></span><span class="op">(</span><span class="va">EuStockMarkets</span><span class="op">)</span><span class="op">)</span>                  <span class="co"># Exact growth rates (percentage change)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = c(1991, 130) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = c(1991, 135) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 260 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 DAX        SMI        CAC       FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496         NA         NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500 -0.9283193  0.6197485 -1.2578971  0.6793256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504 -0.4412412 -0.5863192 -1.8566124 -0.4877652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508  0.9044450  0.3276540 -0.5762515  0.9067887</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.512 -0.1776637  0.1484472  0.8781687  0.5788536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.515 -0.4665793 -0.8893632 -0.5107074 -0.7204089</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fgrowth.html">fgrowth</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>, logdiff <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Log-difference growth rates (percentage change)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time Series:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Start = c(1991, 130) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> End = c(1991, 135) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Frequency = 260 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 DAX        SMI        CAC       FTSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.496         NA         NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.500 -0.9326550  0.6178360 -1.2658756  0.6770286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.504 -0.4422175 -0.5880448 -1.8740638 -0.4889587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.508  0.9003794  0.3271184 -0.5779182  0.9027020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.512 -0.1778217  0.1483372  0.8743353  0.5771847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1991.515 -0.4676712 -0.8933417 -0.5120160 -0.7230164</span>
<span class="r-in"><span><span class="co"># Note that it is not necessary to use factors for grouping.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span> <span class="co"># Can also use vector (internally converted using qF())</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        mpg     disp        hp     drat       wt     qsec     gear     carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 26.66364 105.1364  82.63636 4.070909 2.285727 19.13727 4.090909 1.545455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 19.74286 183.3143 122.28571 3.585714 3.117143 17.97714 3.857143 3.428571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 15.10000 353.1000 209.21429 3.229286 3.999214 16.77214 3.285714 3.500000</span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>              <span class="co"># or a list of vector (internally grouped using GRP())</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            mpg     disp        hp     drat       wt     qsec     gear     carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="GRP.html">GRP</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">vs</span> <span class="op">+</span> <span class="va">am</span><span class="op">)</span>        <span class="co"># It is also possible to create grouping objects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                                 <span class="co"># These are instructive to learn about the grouping,</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 32 with 7 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unsorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.000   2.500   3.000   4.571   5.500  12.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     3     7     3     4    12     2 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                                  <span class="co"># and are directly handed down to C++ code</span></span></span>
<span class="r-plt img"><img src="collapse-package-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span>, <span class="va">g</span><span class="op">)</span>          <span class="co"># This can speed up multiple computations over same groups</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            mpg     disp        hp     drat       wt     qsec     gear     carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</span>
<span class="r-in"><span><span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span>, <span class="va">g</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             mpg      disp       hp      drat        wt       qsec      gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1        NA        NA       NA        NA        NA         NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 1.4525839 13.969371 19.65536 0.1300000 0.4075230 1.67143651 0.5773503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 4.7577005 18.802128 24.14441 0.3783926 0.4400840 0.94546285 0.3779645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 0.7505553  8.660254 37.52777 0.1616581 0.1281601 0.76872188 0.5773503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 1.6317169 44.742634  9.17878 0.5919459 0.1162164 0.81590441 0.5773503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 2.7743959 71.823494 33.35984 0.2302749 0.7683069 0.80164745 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 0.5656854 35.355339 50.20458 0.4808326 0.2828427 0.07071068 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 0.5773503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 0.5345225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 1.1547005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 1.7320508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 0.9003366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 2.8284271</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Factors can efficiently be created using qF()</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span>                     <span class="co"># Unlike GRP objects, factors are checked for NA's</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>, na.exclude <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># This can however be avoided through this option</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span>                                <span class="co"># Note the added class</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "factor"      "na.included"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/" class="external-link">microbenchmark</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">f1</span><span class="op">)</span>, <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">f2</span><span class="op">)</span><span class="op">)</span> <span class="co"># A minor difference, larger on larger data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unit: microseconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               expr   min    lq    mean median    uq    max neval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  fmean(mtcars, f1) 3.813 3.977 4.31320  4.059 4.141 26.035   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  fmean(mtcars, f2) 3.731 3.854 3.93887  3.895 3.977  4.674   100</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="qF.html">finteraction</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">vs</span>, <span class="va">am</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Efficient interactions of vectors and/or factors</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</span>
<span class="r-in"><span><span class="fu"><a href="qF.html">finteraction</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>       <span class="co"># .. or lists of vectors/factors</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple row- or column-wise computations on matrices or data frames with dapply()</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dapply.html">dapply</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">quantile</span><span class="op">)</span>                 <span class="co"># column quantiles</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</span>
<span class="r-in"><span><span class="fu"><a href="dapply.html">dapply</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">quantile</span>, MARGIN <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>     <span class="co"># Row-quantiles</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   0%    25%   50%    75%  100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4          0 3.2600 4.000 18.730 160.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag      0 3.3875 4.000 19.010 160.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710         1 1.6600 4.000 20.705 108.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive     0 2.0000 3.215 20.420 258.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout  0 2.5000 3.440 17.860 360.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant            0 1.8800 3.460 19.160 225.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360         0 3.1050 4.000 15.070 360.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D          0 2.5950 4.000 22.200 146.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230           0 2.5750 4.000 22.850 140.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280           0 3.6800 4.000 18.750 167.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C          0 3.6800 4.000 18.350 167.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE         0 3.0000 4.070 16.900 275.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL         0 3.0000 3.730 17.450 275.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC        0 3.0000 3.780 16.600 275.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 18 rows ]</span>
<span class="r-in"><span>  <span class="co"># dapply preserves the data structure of any matrices / data frames passed</span></span></span>
<span class="r-in"><span>  <span class="co"># Some fast matrix row/column functions are also provided by the matrixStats package</span></span></span>
<span class="r-in"><span><span class="co"># Similarly, BY performs grouped comptations</span></span></span>
<span class="r-in"><span><span class="fu"><a href="BY.html">BY</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">f2</span>, <span class="va">quantile</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mpg cyl   disp    hp  drat     wt  qsec vs  am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0%   21.4   4  71.10  52.0 3.690 1.5130 16.70  0 0.0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.25%  22.8   4  78.85  65.5 3.810 1.8850 18.56  1 0.5    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.50%  26.0   4 108.00  91.0 4.080 2.2000 18.90  1 1.0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.75%  30.4   4 120.65  96.0 4.165 2.6225 19.95  1 1.0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.100% 33.9   4 146.70 113.0 4.930 3.1900 22.90  1 1.0    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0%   17.8   6 145.00 105.0 2.760 2.6200 15.50  0 0.0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 9 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="BY.html">BY</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">f2</span>, <span class="va">quantile</span>, expand.wide <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mpg.0% mpg.25% mpg.50% mpg.75% mpg.100% cyl.0% cyl.25% cyl.50% cyl.75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   21.4    22.8      26    30.4     33.9      4       4       4       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cyl.100% disp.0% disp.25% disp.50% disp.75% disp.100% hp.0% hp.25% hp.50%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        4    71.1    78.85      108   120.65     146.7    52   65.5     91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   hp.75% hp.100% drat.0% drat.25% drat.50% drat.75% drat.100% wt.0% wt.25%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     96     113    3.69     3.81     4.08    4.165      4.93 1.513  1.885</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   wt.50% wt.75% wt.100% qsec.0% qsec.25% qsec.50% qsec.75% qsec.100% vs.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    2.2 2.6225    3.19    16.7    18.56     18.9    19.95      22.9     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vs.25% vs.50% vs.75% vs.100% am.0% am.25% am.50% am.75% am.100% gear.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1      1      1       1     0    0.5      1      1       1       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   gear.25% gear.50% gear.75% gear.100% carb.0% carb.25% carb.50% carb.75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        4        4        4         5       1        1        2        2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   carb.100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="co"># For efficient (grouped) replacing and sweeping out computed statistics, use TRA()</span></span></span>
<span class="r-in"><span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="TRA.html">TRA</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">sds</span>, <span class="st">"/"</span><span class="op">)</span><span class="op">)</span>     <span class="co"># Simple scaling (if sd's not needed, use fsd(mtcars, TRA = "/"))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        mpg     cyl      disp       hp     drat       wt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         3.484351 3.35961 1.2909608 1.604367 7.294100 2.677684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     3.484351 3.35961 1.2909608 1.604367 7.294100 2.938298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        3.783009 2.23974 0.8713986 1.356419 7.200586 2.371079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    3.550719 3.35961 2.0816744 1.604367 5.760468 3.285784</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 3.102731 4.47948 2.9046619 2.552402 5.891388 3.515738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           3.003178 3.35961 1.8154137 1.531441 5.161978 3.536178</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        qsec       vs       am     gear      carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4          9.211261 0.000000 2.004044 5.421494 2.4764735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag      9.524645 0.000000 2.004044 5.421494 2.4764735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        10.414433 1.984063 2.004044 5.421494 0.6191184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    10.878913 1.984063 0.000000 4.066120 0.6191184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout  9.524645 0.000000 0.000000 4.066120 1.2382368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           11.315413 1.984063 0.000000 4.066120 0.6191184</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span><span class="fu"><a href="TRA.html">TRA</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">sds</span>, <span class="st">"/"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sweep.html" class="external-link">sweep</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">2</span>, <span class="va">sds</span>, <span class="st">"/"</span><span class="op">)</span><span class="op">)</span> <span class="co"># A remarkable performance gain..</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unit: microseconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        expr     min       lq      mean   median       uq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       TRA(mtcars, sds, "/")   1.968   2.2755   3.46614   2.7060   3.1160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  sweep(mtcars, 2, sds, "/") 286.344 291.0385 302.21100 297.1065 306.6185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      max neval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   60.557   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  442.349   100</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">f2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="TRA.html">TRA</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">sds</span>, <span class="st">"/"</span>, <span class="va">f2</span><span class="op">)</span><span class="op">)</span> <span class="co"># Groupd scaling (if sd's not needed: fsd(mtcars, f2, TRA = "/"))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         mpg cyl     disp       hp      drat       wt      qsec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         14.447218 Inf 3.849628 4.534121  8.192327 7.352414  9.643407</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     14.447218 Inf 3.849628 4.534121  8.192327 8.068012  9.971493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710         5.055626 Inf 4.019114 4.442421 10.534350 4.073293 11.061282</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    14.722403 Inf 6.207525 4.534121  6.469838 9.022142 11.389297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout  7.304550 Inf 5.311981 3.432928  8.459515 4.529864 14.230606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           12.452126 Inf 5.413539 4.328025  5.797647 9.709677 11.846275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         vs       am     gear      carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         0.000000 1.870829 5.796551 2.2067091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     0.000000 1.870829 5.796551 2.2067091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        3.316625 2.140872 7.416198 1.9148542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    1.870829 0.000000 4.347413 0.5516773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout      NaN 0.000000 4.130678 1.2848321</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           1.870829 0.000000 4.347413 0.5516773</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># All functions above perserve the structure of matrices / data frames</span></span></span>
<span class="r-in"><span><span class="co"># If conversions are required, use these efficient functions:</span></span></span>
<span class="r-in"><span><span class="va">mtcarsM</span> <span class="op">&lt;-</span> <span class="fu"><a href="quick-conversion.html">qM</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>                      <span class="co"># Matrix from data.frame</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">qDF</a></span><span class="op">(</span><span class="va">mtcarsM</span><span class="op">)</span><span class="op">)</span>                         <span class="co"># data.frame from matrix columns</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">mrtl</a></span><span class="op">(</span><span class="va">mtcarsM</span>, <span class="cn">TRUE</span>, <span class="st">"data.frame"</span><span class="op">)</span><span class="op">)</span>    <span class="co"># data.frame from matrix rows, etc..</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Mazda RX4 Mazda RX4 Wag Datsun 710 Hornet 4 Drive Hornet Sportabout Valiant</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg        21            21       22.8           21.4              18.7    18.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl         6             6        4.0            6.0               8.0     6.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Duster 360 Merc 240D Merc 230 Merc 280 Merc 280C Merc 450SE Merc 450SL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg       14.3      24.4     22.8     19.2      17.8       16.4       17.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl        8.0       4.0      4.0      6.0       6.0        8.0        8.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Merc 450SLC Cadillac Fleetwood Lincoln Continental Chrysler Imperial</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg        15.2               10.4                10.4              14.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl         8.0                8.0                 8.0               8.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Fiat 128 Honda Civic Toyota Corolla Toyota Corona Dodge Challenger</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg     32.4        30.4           33.9          21.5             15.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl      4.0         4.0            4.0           4.0              8.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     AMC Javelin Camaro Z28 Pontiac Firebird Fiat X1-9 Porsche 914-2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg        15.2       13.3             19.2      27.3            26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl         8.0        8.0              8.0       4.0             4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Lotus Europa Ford Pantera L Ferrari Dino Maserati Bora Volvo 142E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpg         30.4           15.8         19.7            15       21.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cyl          4.0            8.0          6.0             8        4.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 4 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">qDT</a></span><span class="op">(</span><span class="va">mtcarsM</span>, <span class="st">"cars"</span><span class="op">)</span><span class="op">)</span>                 <span class="co"># Saving row.names when converting matrix to data.table</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 cars   mpg   cyl  disp    hp  drat    wt  qsec    vs    am</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         Mazda RX4  21.0     6   160   110  3.90 2.620 16.46     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     Mazda RX4 Wag  21.0     6   160   110  3.90 2.875 17.02     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        Datsun 710  22.8     4   108    93  3.85 2.320 18.61     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:    Hornet 4 Drive  21.4     6   258   110  3.08 3.215 19.44     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     gear  carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     4     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="quick-conversion.html">qDT</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="st">"cars"</span><span class="op">)</span><span class="op">)</span>                  <span class="co"># Same use a data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 cars   mpg   cyl  disp    hp  drat    wt  qsec    vs    am</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         Mazda RX4  21.0     6   160   110  3.90 2.620 16.46     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     Mazda RX4 Wag  21.0     6   160   110  3.90 2.875 17.02     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:        Datsun 710  22.8     4   108    93  3.85 2.320 18.61     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:    Hornet 4 Drive  21.4     6   258   110  3.08 3.215 19.44     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     gear  carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     4     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co">## Now let's get some real data and see how we can use this power for data manipulation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span> <span class="co"># World Bank World Development Data: 216 countries, 61 years, 5 series (columns 9-13)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   LIFEEX GINI       ODA     POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 32.446   NA 116769997 8996973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 32.962   NA 232080002 9169410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 33.471   NA 112839996 9351441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 33.971   NA 237720001 9543205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 34.463   NA 295920013 9744781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Starting with some discriptive tools...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="small-helpers.html">namlab</a></span><span class="op">(</span><span class="va">wlddev</span>, class <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>           <span class="co"># Show variable names, labels and classes</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Variable     Class</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   country character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     iso3c    factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      date      Date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      year   integer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    decade   integer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    region    factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    income    factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      OECD   logical</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     PCGDP   numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   LIFEEX   numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     GINI   numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      ODA   numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      POP   numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                Label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                       Country Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                                                       Country Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                                         Date Recorded (Fictitious)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                                                               Year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                                                             Decade</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                                                             Region</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                                                       Income Level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                                                            Is OECD Member Country?</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                                                 GDP per capita (constant 2010 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                           Life expectancy at birth, total (years)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                                  Gini index (World Bank estimate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Net official development assistance and official aid received (constant 2018 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                                                 Population, total</span>
<span class="r-in"><span><span class="fu"><a href="fnobs.html">fnobs</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                          <span class="co"># Observation count</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176   13176   13176   13176   13176   13176   13176   13176    9470   11670 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    GINI     ODA     POP </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1744    8608   12919 </span>
<span class="r-in"><span><span class="fu"><a href="pwcor_pwcov_pwnobs.html">pwnobs</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                         <span class="co"># Pairwise observation count</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         country iso3c  date  year decade region income  OECD PCGDP LIFEEX GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country   13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c     13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date      13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year      13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade    13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          ODA   POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country 8608 12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c   8608 12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date    8608 12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year    8608 12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade  8608 12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 8 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fnobs.html">fnobs</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">wlddev</span><span class="op">$</span><span class="va">country</span><span class="op">)</span><span class="op">)</span>    <span class="co"># Grouped observation count</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                country iso3c date year decade region income OECD PCGDP LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Afghanistan         61    61   61   61     61     61     61   61    18     60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Albania             61    61   61   61     61     61     61   61    40     60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Algeria             61    61   61   61     61     61     61   61    60     60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> American Samoa      61    61   61   61     61     61     61   61    17      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Andorra             61    61   61   61     61     61     61   61    50      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                GINI ODA POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Afghanistan       0  60  60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Albania           9  32  60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Algeria           3  60  60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> American Samoa    0   0  60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Andorra           0   0  60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="fndistinct.html">fndistinct</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                     <span class="co"># Distinct values</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     216     216      61      61       7       7       4       2    9470   10548 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    GINI     ODA     POP </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     368    7832   12877 </span>
<span class="r-in"><span><span class="fu"><a href="descr.html">descr</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                          <span class="co"># Describe data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dataset: wlddev, 13 Variables, N = 13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country (character): Country Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176    216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       Freq   Perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Afghanistan             61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Albania                 61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Algeria                 61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> American Samoa          61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Andorra                 61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Angola                  61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Antigua and Barbuda     61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Argentina               61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Armenia                 61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Aruba                   61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Australia               61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Austria                 61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Azerbaijan              61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bahamas, The            61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... 202 Others       12322  93.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Table Frequencies</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      61      61      61      61      61      61 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c (factor): Country Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176    216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  Freq   Perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ABW                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AFG                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AGO                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ALB                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AND                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARE                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARG                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ARM                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ASM                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ATG                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AUS                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AUT                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AZE                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BDI                61   0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... 202 Others  12322  93.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of Table Frequencies</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      61      61      61      61      61      61 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date (Date): Date Recorded (Fictitious)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          N       Ndist         Min         Max  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      13176          61  1961-01-01  2021-01-01  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year (integer): Year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist  Mean     SD   Min   Max  Skew  Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176     61  1990  17.61  1960  2020    -0   1.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1%    5%   10%   25%   50%   75%   90%   95%   99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1960  1963  1966  1975  1990  2005  2014  2017  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade (integer): Decade</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist     Mean     SD   Min   Max  Skew  Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176      7  1985.57  17.51  1960  2020  0.03  1.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1%    5%   10%   25%   50%   75%   90%   95%   99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1960  1960  1960  1970  1990  2000  2010  2010  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region (factor): Region</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Freq   Perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       3538  26.85</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2928  22.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   2562  19.44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         2196  16.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  1281   9.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   488   3.70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                183   1.39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income (factor): Income Level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Freq   Perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          4819  36.57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  3660  27.78</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  2867  21.76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           1830  13.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD (logical): Is OECD Member Country?</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   13176      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Freq   Perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FALSE  10980  83.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TRUE    2196  16.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP (numeric): GDP per capita (constant 2010 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics (28.13% NAs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N  Ndist      Mean        SD     Min        Max  Skew   Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   9470   9470  12048.78  19077.64  132.08  196061.42  3.13  17.12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1%      5%     10%      25%      50%       75%       90%       95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   227.71  399.62  555.55  1303.19  3767.16  14787.03  35646.02  48507.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   92340.28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX (numeric): Life expectancy at birth, total (years)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics (11.43% NAs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist  Mean     SD    Min    Max   Skew  Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   11670  10548  64.3  11.48  18.91  85.42  -0.67  2.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1%     5%    10%    25%    50%    75%    90%    95%    99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   35.83  42.77  46.83  56.36  67.44  72.95  77.08  79.34  82.36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI (numeric): Gini index (World Bank estimate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics (86.76% NAs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N  Ndist   Mean   SD   Min   Max  Skew  Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1744    368  38.53  9.2  20.7  65.8   0.6  2.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1%    5%   10%   25%   50%  75%   90%    95%   99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   24.6  26.3  27.6  31.5  36.4   45  52.6  55.98  60.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA (numeric): Net official development assistance and official aid received (constant 2018 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics (34.67% NAs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      N  Ndist        Mean          SD          Min             Max  Skew</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   8608   7832  454'720131  868'712654  -997'679993  2.56715605e+10  6.98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   114.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             1%           5%          10%          25%         50%         75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -12'593999.7  1'363500.01  8'347000.31  44'887499.8  165'970001  495'042503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              90%             95%             99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.18400697e+09  1.93281696e+09  3.73380782e+09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP (numeric): Population, total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistics (1.95% NAs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N  Ndist         Mean          SD   Min             Max  Skew    Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   12919  12877  24'245971.6  102'120674  2833  1.39771500e+09  9.75  108.91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1%       5%      10%     25%       50%        75%          90%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   8698.84  31083.3  62268.4  443791  4'072517  12'816178  46'637331.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           95%         99%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   81'177252.5  308'862641</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-in"><span><span class="fu"><a href="varying.html">varying</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span><span class="op">)</span>             <span class="co"># Show which variables vary within countries</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  iso3c   date   year decade region income   OECD  PCGDP LIFEEX   GINI    ODA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  FALSE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE   TRUE   TRUE   TRUE   TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    POP </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRUE </span>
<span class="r-in"><span><span class="fu"><a href="qsu.html">qsu</a></span><span class="op">(</span><span class="va">wlddev</span>, pid <span class="op">=</span> <span class="op">~</span> <span class="va">country</span>,           <span class="co"># Panel-summarize columns 9 though 12 of this data</span></span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, vlabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>       <span class="co"># (between and within countries)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , PCGDP: GDP per capita (constant 2010 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T        Mean          SD          Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     9470   12048.778  19077.6416     132.0776  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      206  12962.6054  20189.9007     253.1886   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   45.9709   12048.778   6723.6808  -33504.8721  76767.5254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , LIFEEX: Life expectancy at birth, total (years)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T     Mean       SD      Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall    11670  64.2963  11.4764   18.907  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      207  64.9537   9.8936  40.9663  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   56.3768  64.2963   6.0842  32.9068  84.4198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , GINI: Gini index (World Bank estimate)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T     Mean      SD      Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     1744  38.5341  9.2006     20.7     65.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      167  39.4233  8.1356  24.8667  61.7143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   10.4431  38.5341  2.9277  25.3917  55.3591</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , ODA: Net official development assistance and official aid received (constant 2018 US$)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T        Mean          SD              Min             Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     8608  454'720131  868'712654      -997'679993  2.56715605e+10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      178  439'168412  569'049959       468717.916  3.62337432e+09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   48.3596  454'720131  650'709624  -2.44379420e+09  2.45610972e+10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="qsu.html">qsu</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">region</span>, <span class="op">~</span> <span class="va">country</span>,       <span class="co"># Do all of that by region and also compute higher moments</span></span></span>
<span class="r-in"><span>    cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, higher <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>        <span class="co"># -&gt; returns a 4D array</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Overall, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              N/T        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max    Skew     Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517  1.6392   4.7419</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417  2.2022  10.1977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331  4.1702  29.3739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753  2.4178   9.7669</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091   0.938   2.9688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564  2.7874  10.3402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523  3.1161  14.4175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Between, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             N/T        Mean          SD         Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific          34  10513.2441   12771.742    444.2899  39722.0077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        56  25992.9618   24051.035    809.4753   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    38   7628.4477   8470.9708   1357.3326  77403.7443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               Skew     Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1.1488   2.7089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2.0026   9.0733</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   4.4548  32.4956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 10 slices ] </span>
<span class="r-in"><span><span class="fu"><a href="qsu.html">qsu</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">region</span>, <span class="op">~</span> <span class="va">country</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>,</span></span>
<span class="r-in"><span>    higher <span class="op">=</span> <span class="cn">TRUE</span>, array <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span>                           <span class="co"># Return as a list of matrices..</span></span></span>
<span class="r-in"><span><span class="fu"><a href="unlist2d.html">unlist2d</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Variable"</span>,<span class="st">"Trans"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span><span class="co"># and turn into a tidy data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Variable   Trans                     Region    N      Mean        SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    PCGDP Overall        East Asia &amp; Pacific 1467 10513.244 14383.551</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    PCGDP Overall      Europe &amp; Central Asia 2243 25992.962 26435.132</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    PCGDP Overall  Latin America &amp; Caribbean 1976  7628.448  8818.505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    PCGDP Overall Middle East &amp; North Africa  842 13878.421 18419.791</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    PCGDP Overall              North America  180 48699.760 24196.285</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    PCGDP Overall                 South Asia  382  1235.926  1611.223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Min        Max      Skew      Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   132.0776  71992.152 1.6392248  4.741856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   366.9354 196061.417 2.2022472 10.197685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1005.4085  88391.333 4.1701769 29.373869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   578.5996 116232.753 2.4177586  9.766883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 16405.9053 113236.091 0.9380056  2.968769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   265.9625   8476.564 2.7873830 10.340176</span>
<span class="r-in"><span><span class="fu"><a href="pwcor_pwcov_pwnobs.html">pwcor</a></span><span class="op">(</span><span class="fu"><a href="select_replace_vars.html">num_vars</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>, P <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>                           <span class="co"># Pairwise correlations with p-value</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          year decade  PCGDP LIFEEX   GINI    ODA    POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year      1     .99*   .16*   .47*  -.20*   .14*   .06*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   .99*    1     .15*   .46*  -.20*   .14*   .06*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP    .16*   .15*    1     .57*  -.44*  -.16*  -.06*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   .47*   .46*   .57*    1    -.35*  -.02    .03*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI    -.20*  -.20*  -.44*  -.35*    1    -.20*   .04 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA      .14*   .14*  -.16*  -.02   -.20*    1     .31*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP      .06*   .06*  -.06*   .03*   .04    .31*    1  </span>
<span class="r-in"><span><span class="fu"><a href="pwcor_pwcov_pwnobs.html">pwcor</a></span><span class="op">(</span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="fu"><a href="select_replace_vars.html">num_vars</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>, <span class="va">wlddev</span><span class="op">$</span><span class="va">country</span><span class="op">)</span>, P <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>    <span class="co"># Correlating country means</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>the standard deviation is zero</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           year  decade   PCGDP  LIFEEX    GINI     ODA     POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year       NA      NA      NA      NA      NA      NA      NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade     NA      1      .00     .00     .00     .00     .00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP      NA     .00      1      .60*   -.42*   -.25*   -.07 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX     NA     .00     .60*     1     -.40*   -.21*   -.02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI       NA     .00    -.42*   -.40*     1     -.19*   -.04 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA        NA     .00    -.25*   -.21*   -.19*     1      .50*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP        NA     .00    -.07    -.02    -.04     .50*     1  </span>
<span class="r-in"><span><span class="fu"><a href="pwcor_pwcov_pwnobs.html">pwcor</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="fu"><a href="select_replace_vars.html">num_vars</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>, <span class="va">wlddev</span><span class="op">$</span><span class="va">country</span><span class="op">)</span>, P <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># Within-country correlations</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          year decade  PCGDP LIFEEX   GINI    ODA    POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year      1     .99*   .44*   .84*  -.21*   .19*   .24*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   .99*    1     .44*   .83*  -.19*   .18*   .24*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP    .44*   .44*    1     .31*  -.01   -.01    .06*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   .84*   .83*   .31*    1    -.16*   .17*   .29*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI    -.21*  -.19*  -.01   -.16*    1    -.08*   .01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA      .19*   .18*  -.01    .17*  -.08*    1    -.11*</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP      .24*   .24*   .06*   .29*   .01   -.11*    1  </span>
<span class="r-in"><span><span class="fu"><a href="psacf.html">psacf</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span><span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>                 <span class="co"># Panel-data Autocorrelation function</span></span></span>
<span class="r-plt img"><img src="collapse-package-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="psacf.html">pspacf</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span><span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>                <span class="co"># Partial panel-autocorrelations</span></span></span>
<span class="r-plt img"><img src="collapse-package-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="psmat.html">psmat</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span><span class="va">iso3c</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span>         <span class="co"># Convert panel to 3D array and plot</span></span></span>
<span class="r-plt img"><img src="collapse-package-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## collapse offers a few very efficent functions for data manipulation:</span></span></span>
<span class="r-in"><span><span class="co"># Fast selecting and replacing columns</span></span></span>
<span class="r-in"><span><span class="va">series</span> <span class="op">&lt;-</span> <span class="fu"><a href="select_replace_vars.html">get_vars</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>     <span class="co"># Same as wlddev[9:12] but 2x faster</span></span></span>
<span class="r-in"><span><span class="va">series</span> <span class="op">&lt;-</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="co"># Same thing: &gt; 100x faster than dplyr::select</span></span></span>
<span class="r-in"><span><span class="fu"><a href="select_replace_vars.html">get_vars</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">series</span>     <span class="co"># Replace, 8x faster wlddev[9:12] &lt;- series + replaces names</span></span></span>
<span class="r-in"><span><span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">series</span> <span class="co"># Same thing</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fast subsetting</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">country</span> <span class="op">==</span> <span class="st">"Ireland"</span>, <span class="op">-</span><span class="va">country</span>, <span class="op">-</span><span class="va">iso3c</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         date year decade                region      income OECD PCGDP   LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1961-01-01 1960   1960 Europe &amp; Central Asia High income TRUE    NA 69.79651</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1962-01-01 1961   1960 Europe &amp; Central Asia High income TRUE    NA 69.97827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1963-01-01 1962   1960 Europe &amp; Central Asia High income TRUE    NA 70.13407</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1964-01-01 1963   1960 Europe &amp; Central Asia High income TRUE    NA 70.27293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1965-01-01 1964   1960 Europe &amp; Central Asia High income TRUE    NA 70.40129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1966-01-01 1965   1960 Europe &amp; Central Asia High income TRUE    NA 70.52315</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GINI ODA     POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   NA  NA 2828600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   NA  NA 2824400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   NA  NA 2836050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   NA  NA 2852650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   NA  NA 2866550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   NA  NA 2877300</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">country</span> <span class="op">==</span> <span class="st">"Ireland"</span> <span class="op">&amp;</span> <span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">year</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year    PCGDP   LIFEEX GINI ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1991 24642.11 75.00527   NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1992 25292.81 75.18095   NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1993 25844.34 75.33612   NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1994 27224.37 75.47680 36.9  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1995 29694.65 75.61756 37.0  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1996 31644.89 75.83171 35.6  NA</span>
<span class="r-in"><span><span class="fu"><a href="fsubset.html">ss</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="co"># This is an order of magnitude faster than wlddev[1:10, 1:10]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Afghanistan   AFG 1967-01-01 1966   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 32.446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 32.962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 33.471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 33.971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 34.463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 34.948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 35.430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fast transforming</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="va">wlddev</span>, ODA_GDP <span class="op">=</span> <span class="va">ODA</span> <span class="op">/</span> <span class="va">PCGDP</span>, ODA_LIFEEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">ODA</span><span class="op">)</span> <span class="op">/</span> <span class="va">LIFEEX</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NaNs produced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   LIFEEX GINI       ODA     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 32.446   NA 116769997 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 32.962   NA 232080002 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 33.471   NA 112839996 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 33.971   NA 237720001 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="ftransform.html">settransform</a></span><span class="op">(</span><span class="va">wlddev</span>, ODA_GDP <span class="op">=</span> <span class="va">ODA</span> <span class="op">/</span> <span class="va">PCGDP</span>, ODA_LIFEEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">ODA</span><span class="op">)</span> <span class="op">/</span> <span class="va">LIFEEX</span><span class="op">)</span> <span class="co"># by reference</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NaNs produced</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="va">wlddev</span>, PCGDP <span class="op">=</span> <span class="cn">NULL</span>, ODA <span class="op">=</span> <span class="cn">NULL</span>, GINI_sum <span class="op">=</span> <span class="fu"><a href="fsum.html">fsum</a></span><span class="op">(</span><span class="va">GINI</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE 32.446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE 32.962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE 33.471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE 33.971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE 34.463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GINI     POP ODA_GDP ODA_LIFEEX GINI_sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   NA 8996973      NA   333.0462  67203.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   NA 9169410      NA   462.1738  67203.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   NA 9351441      NA   317.3678  67203.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   NA 9543205      NA   453.8627  67203.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   NA 9744781      NA   499.1535  67203.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="ftransform.html">ftransformv</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, <span class="va">log</span><span class="op">)</span><span class="op">)</span>                   <span class="co"># Can also transform with lists of columns</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NaNs produced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     LIFEEX GINI      ODA     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 3.479577   NA 18.57572 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 3.495355   NA 19.26259 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 3.510679   NA 18.54148 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 3.525507   NA 19.28660 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="ftransform.html">ftransformv</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, <span class="va">fscale</span>, apply <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="co"># apply = FALSE invokes fscale.data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -2.775283   NA -0.3890241 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.730321   NA -0.2562874 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.685969   NA -0.3935480 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -2.642402   NA -0.2497951 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="ftransform.html">settransformv</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, <span class="va">fscale</span>, apply <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>     <span class="co"># Changing the data by reference</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span>         <span class="co"># Same thing (using replacement method)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># Same thing, using magrittr</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="ftransform.html">ftransformv</a></span><span class="op">(</span><span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, <span class="va">fscale</span>, apply <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/select_replace_vars.html">gv</a></span><span class="op">(</span><span class="va">.</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="op">|&gt;</span>              <span class="co"># With compound pipes: Scaling and lagging</span></span></span>
<span class="r-in"><span>                        <span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="flag.html">flag</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, <span class="va">iso3c</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date year decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX L1.PCGDP L2.PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -2.775283   NA -0.3890241 8996973      NA   333.0462       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.730321   NA -0.2562874 9169410      NA   462.1738       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.685969   NA -0.3935480 9351441      NA   317.3678       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.LIFEEX L2.LIFEEX L1.GINI L2.GINI     L1.ODA     L2.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA        NA      NA      NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.775283        NA      NA      NA -0.3890241         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.730321 -2.775283      NA      NA -0.2562874 -0.3890241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fast reordering</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="roworder.html">roworder</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">-</span><span class="va">country</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    country iso3c       date year decade             region              income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Zimbabwe   ZWE 1961-01-01 1960   1960 Sub-Saharan Africa Lower middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Zimbabwe   ZWE 1962-01-01 1961   1960 Sub-Saharan Africa Lower middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Zimbabwe   ZWE 1963-01-01 1962   1960 Sub-Saharan Africa Lower middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Zimbabwe   ZWE 1964-01-01 1963   1960 Sub-Saharan Africa Lower middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    OECD      PCGDP     LIFEEX GINI        ODA     POP     ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 FALSE -0.5794259 -0.9826503   NA         NA 3776681          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 FALSE -0.5779547 -0.9422195   NA -0.5233262 3905034    97.77415   5.912678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 FALSE -0.5789920 -0.9018759   NA         NA 4039201          NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 FALSE -0.5775741 -0.8620551   NA -0.4094221 4178726 96162.61027 182.938198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="colorder.html">colorder</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">country</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year iso3c       date decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960   AFG 1961-01-01   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961   AFG 1962-01-01   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962   AFG 1963-01-01   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963   AFG 1964-01-01   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -2.775283   NA -0.3890241 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.730321   NA -0.2562874 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.685969   NA -0.3935480 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -2.642402   NA -0.2497951 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fast renaming</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="frename.html">frename</a></span><span class="op">(</span><span class="va">wlddev</span>, country <span class="op">=</span> <span class="va">Ctry</span>, year <span class="op">=</span> <span class="va">Yr</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Ctry iso3c       date   Yr decade     region     income  OECD PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -2.775283   NA -0.3890241 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.730321   NA -0.2562874 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.685969   NA -0.3935480 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -2.642402   NA -0.2497951 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span><span class="fu"><a href="frename.html">setrename</a></span><span class="op">(</span><span class="va">wlddev</span>, country <span class="op">=</span> <span class="va">Ctry</span>, year <span class="op">=</span> <span class="va">Yr</span><span class="op">)</span>     <span class="co"># By reference</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="frename.html">frename</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">tolower</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Ctry iso3c       date   Yr decade     region     income  OECD pcgdp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      lifeex gini        oda     POP ODA_GDP ODA_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -2.775283   NA -0.3890241 8996973      NA   333.0462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -2.730321   NA -0.2562874 9169410      NA   462.1738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -2.685969   NA -0.3935480 9351441      NA   317.3678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -2.642402   NA -0.2497951 9543205      NA   453.8627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fast grouping</span></span></span>
<span class="r-in"><span><span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">Ctry</span>, <span class="va">decade</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_vars</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Ctry decade</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan   1960</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                                       <span class="co"># .. but only works with collapse functions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Now lets start putting things together</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="op">)</span>         <span class="co"># Fast aggregation using the mean</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       region              income      PCGDP   LIFEEX     GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        East Asia &amp; Pacific         High income 32671.0522 78.21996 32.95000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        East Asia &amp; Pacific Lower middle income  1738.5111 65.45647 36.51972</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        East Asia &amp; Pacific Upper middle income  4575.8695 70.87431 40.64815</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Europe &amp; Central Asia         High income 40814.1215 77.67583 30.94218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Europe &amp; Central Asia          Low income   695.7951 65.04128 32.13333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Europe &amp; Central Asia Lower middle income  1779.7149 68.79873 30.66176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Europe &amp; Central Asia Upper middle income  5182.1800 71.30199 34.85362</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Latin America &amp; Caribbean         High income 19864.5057 75.55674 48.35714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Latin America &amp; Caribbean          Low income  1189.8492 58.97359 41.10000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Latin America &amp; Caribbean Lower middle income  1987.5292 69.31612 50.58125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Latin America &amp; Caribbean Upper middle income  6224.6674 72.58127 49.88547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  112194118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  509965862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  219146704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  321907195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  244539286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  395371417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  463652924</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   31307379</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  753747928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 559540257</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 188305879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 12 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same thing using dplyr manipulation verbs</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span>,<span class="va">income</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="op">)</span>       <span class="co"># This is already a lot faster than summarize_all(mean)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 23 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region                    income               PCGDP LIFEEX  GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> East Asia &amp; Pacific       High income         <span style="text-decoration: underline;">32</span>671.   78.2  33.0 112<span style="text-decoration: underline;">194</span>118.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> East Asia &amp; Pacific       Lower middle income  <span style="text-decoration: underline;">1</span>739.   65.5  36.5 509<span style="text-decoration: underline;">965</span>862.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> East Asia &amp; Pacific       Upper middle income  <span style="text-decoration: underline;">4</span>576.   70.9  40.6 219<span style="text-decoration: underline;">146</span>704.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Europe &amp; Central Asia     High income         <span style="text-decoration: underline;">40</span>814.   77.7  30.9 321<span style="text-decoration: underline;">907</span>195.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Europe &amp; Central Asia     Low income            696.   65.0  32.1 244<span style="text-decoration: underline;">539</span>286.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Europe &amp; Central Asia     Lower middle income  <span style="text-decoration: underline;">1</span>780.   68.8  30.7 395<span style="text-decoration: underline;">371</span>417.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Europe &amp; Central Asia     Upper middle income  <span style="text-decoration: underline;">5</span>182.   71.3  34.9 463<span style="text-decoration: underline;">652</span>924.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Latin America &amp; Caribbean High income         <span style="text-decoration: underline;">19</span>865.   75.6  48.4  31<span style="text-decoration: underline;">307</span>379.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Latin America &amp; Caribbean Low income           <span style="text-decoration: underline;">1</span>190.   59.0  41.1 753<span style="text-decoration: underline;">747</span>928.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Latin America &amp; Caribbean Lower middle income  <span style="text-decoration: underline;">1</span>988.   69.3  50.6 559<span style="text-decoration: underline;">540</span>257.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 13 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">POP</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">POP</span><span class="op">)</span>     <span class="co"># Weighted group means</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       region              income     sum.POP      PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        East Asia &amp; Pacific         High income  6165902760 37889.3406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        East Asia &amp; Pacific Lower middle income 13784998066  2135.6182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        East Asia &amp; Pacific Upper middle income 40150644873  3769.4215</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Europe &amp; Central Asia         High income 13923291507 34583.4203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Europe &amp; Central Asia          Low income   203224216   722.7351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Europe &amp; Central Asia Lower middle income  2399154808  2145.1352</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Europe &amp; Central Asia Upper middle income  8919358306  8238.8391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Latin America &amp; Caribbean         High income   842939686 13068.1667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Latin America &amp; Caribbean          Low income   267125746  1193.5889</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Latin America &amp; Caribbean Lower middle income   815192217  2011.6260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX     GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  80.79250 32.81601  -79785907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  68.24548 36.40362 1060544119</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  73.07773 40.38496 1229983586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  78.82923 32.27710 1107199019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  65.76604 32.22326  261043896</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  68.98050 28.97857  556232624</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  69.78322 38.66475 1187976647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  76.76809 48.85497   97880105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  59.34831 41.10000  794781510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 69.33538 50.52363  571015463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 13 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">POP</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">POP</span><span class="op">)</span>       <span class="co"># Weighted group standard deviations</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       region              income     sum.POP       PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        East Asia &amp; Pacific         High income  6165902760 11619.90339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        East Asia &amp; Pacific Lower middle income 13784998066  1074.84975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        East Asia &amp; Pacific Upper middle income 40150644873  2374.39410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Europe &amp; Central Asia         High income 13923291507 13593.46879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Europe &amp; Central Asia          Low income   203224216   238.47730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Europe &amp; Central Asia Lower middle income  2399154808   841.97662</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Europe &amp; Central Asia Upper middle income  8919358306  3175.38606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Latin America &amp; Caribbean         High income   842939686  6273.64310</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Latin America &amp; Caribbean          Low income   267125746    70.56928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Latin America &amp; Caribbean Lower middle income   815192217   580.31064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      LIFEEX     GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2.730868 1.247116  129087430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  4.230245 4.316708  943798728</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2.428883 2.458222 1519636778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2.895801 2.994940 1131585991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  4.555972 1.547793  112926454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1.688117 4.573107  370416116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  3.707457 4.227846 1068502287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2.421882 5.289102   71662290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2.815436 0.000000  566758933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 4.220554 5.684628  243414533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 13 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="efficient-programming.html">na_omit</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="st">"POP"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">:</span><span class="va">POP</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fnth_fmedian.html">fnth</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="va">POP</span><span class="op">)</span>       <span class="co"># Weighted group third quartile</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       region              income     sum.POP     PCGDP   LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        East Asia &amp; Pacific         High income 11407808149 42201.079 81.71320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        East Asia &amp; Pacific Lower middle income 22174820629  2350.332 69.84968</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        East Asia &amp; Pacific Upper middle income 69639871478  3796.016 73.77902</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Europe &amp; Central Asia         High income 27285316560 37939.285 79.12994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Europe &amp; Central Asia          Low income   311485944  1010.399 68.74935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Europe &amp; Central Asia Lower middle income  4511786205  3049.405 70.15657</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Europe &amp; Central Asia Upper middle income 16972478305 10543.823 70.57815</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Latin America &amp; Caribbean         High income  1466292826 13929.260 77.62527</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Latin America &amp; Caribbean          Low income   429756890  1426.615 60.19115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Latin America &amp; Caribbean Lower middle income  1290800630  2241.730 71.18339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  33.50000  744862041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  39.09699 1828537218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  42.25373 2498289114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  34.70000 1665332268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  33.54169  369881699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  29.76143  713578745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  41.20000 1780829097</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  54.82206  156066838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  41.10000  956301069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 55.50000  657517519</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 13 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>                         <span class="co"># Within transformation</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PCGDP    LIFEEX GINI         ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA -16.75117   NA -1370778502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    NA -16.23517   NA -1255468497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA -15.72617   NA -1374708502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA -15.22617   NA -1249828497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA -14.73417   NA -1191628485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA -14.24917   NA -1145708502</span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span>TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>                <span class="co"># Grouped centering using the median</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PCGDP   LIFEEX GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA -17.5395   NA -144765007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    NA -17.0235   NA  -29455002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA -16.5145   NA -148695007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA -16.0145   NA  -23815002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA -15.5225   NA   34385010</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA -15.0375   NA   80304993</span>
<span class="r-in"><span><span class="co"># Replacing data points by the weighted first quartile:</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="efficient-programming.html">na_omit</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="st">"POP"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">POP</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">.</span>, <span class="op">-</span><span class="va">country</span>, <span class="op">-</span><span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>             <span class="fu"><a href="fnth_fmedian.html">fnth</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="va">POP</span>, <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year    PCGDP   LIFEEX GINI       ODA     POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960 406.9948 45.86685   NA 237899441 8996973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961 406.9948 45.86685   NA 237899441 9169410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962 406.9948 45.86685   NA 237899441 9351441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963 406.9948 45.86685   NA 237899441 9543205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964 406.9948 45.86685   NA 237899441 9744781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965 406.9948 45.86685   NA 237899441 9956320</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Standardizing</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PCGDP    LIFEEX GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA -1.653181   NA -0.6498451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    NA -1.602256   NA -0.5951801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA -1.552023   NA -0.6517082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA -1.502678   NA -0.5925063</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA -1.454122   NA -0.5649154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA -1.406257   NA -0.5431461</span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">:</span><span class="va">POP</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="fscale.html">fscale</a></span><span class="op">(</span><span class="va">POP</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Weighted..</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       POP PCGDP    LIFEEX GINI        ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 8996973    NA -2.172769   NA -0.9502811</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 9169410    NA -2.119489   NA -0.9011481</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 9351441    NA -2.066932   NA -0.9519557</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 9543205    NA -2.015304   NA -0.8987449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 9744781    NA -1.964502   NA -0.8739462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 9956320    NA -1.914423   NA -0.8543799</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Adding 1 lead and 2 lags of each variable</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="flag.html">flag</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP F1.LIFEEX LIFEEX L1.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA    NA       NA       NA    32.962 32.446        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA    NA       NA       NA    33.471 32.962    32.446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA    NA       NA       NA    33.971 33.471    32.962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L2.LIFEEX F1.GINI GINI L1.GINI L2.GINI    F1.ODA       ODA    L1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA      NA   NA      NA      NA 232080002 116769997        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        NA      NA   NA      NA      NA 112839996 232080002 116769997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    32.446      NA   NA      NA      NA 237720001 112839996 232080002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      L2.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 116769997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Adding 1 lead and 10-year growth rates</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fgrowth.html">fgrowth</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year PCGDP G1.PCGDP L10G1.PCGDP LIFEEX G1.LIFEEX L10G1.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960    NA       NA          NA 32.446        NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961    NA       NA          NA 32.962  1.590335           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962    NA       NA          NA 33.471  1.544202           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963    NA       NA          NA 33.971  1.493830           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964    NA       NA          NA 34.463  1.448294           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GINI G1.GINI L10G1.GINI       ODA    G1.ODA L10G1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   NA      NA         NA 116769997        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   NA      NA         NA 232080002  98.74969        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   NA      NA         NA 112839996 -51.37884        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   NA      NA         NA 237720001 110.66998        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   NA      NA         NA 295920013  24.48259        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># etc...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Aggregation with multiple functions</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="select_replace_vars.html">add_vars</a></span><span class="op">(</span><span class="fu"><a href="GRP.html">fgroup_vars</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"unique"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">.</span>, keep.group_vars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="small-helpers.html">add_stub</a></span><span class="op">(</span><span class="st">"median_"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">.</span>, keep.group_vars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="small-helpers.html">add_stub</a></span><span class="op">(</span><span class="st">"mean_"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             <span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">.</span>, keep.group_vars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="small-helpers.html">add_stub</a></span><span class="op">(</span><span class="st">"sd_"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  region              income median_PCGDP median_LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   East Asia &amp; Pacific         High income   32573.8177      78.54024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   East Asia &amp; Pacific Lower middle income    1658.3786      66.07200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   East Asia &amp; Pacific Upper middle income    3583.2189      70.61500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Europe &amp; Central Asia         High income   36201.7707      78.16061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Europe &amp; Central Asia          Low income     668.9513      66.08000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   median_GINI median_ODA mean_PCGDP mean_LIFEEX mean_GINI  mean_ODA   sd_PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       32.75   11500000 32671.0522    78.21996  32.95000 112194118 13031.1867</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       35.70  257079987  1738.5111    65.45647  36.51972 509965862   904.3004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       40.35   49730000  4575.8695    70.87431  40.64815 219146704  2489.3795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       31.10  138889999 40814.1215    77.67583  30.94218 321907195 29485.3091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       32.45  239055000   695.7951    65.04128  32.13333 244539286   242.4158</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sd_LIFEEX  sd_GINI    sd_ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  3.825737 1.322624 223580786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  5.003373 4.779528 686619373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3.157915 3.506637 684346804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  3.810700 3.676878 632730086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  4.723263 1.713087 116363515</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Transformation with multiple functions</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="select_replace_vars.html">add_vars</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">fdiff</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="flag.html">flag</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, <span class="va">year</span><span class="op">)</span>,  <span class="co"># Sequence of lagged differences</span></span></span>
<span class="r-in"><span>             <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="small-helpers.html">add_stub</a></span><span class="op">(</span><span class="st">"W."</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="flag.html">flag</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, <span class="va">year</span>, keep.ids <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>            <span class="co"># Sequence of lagged demeaned vars</span></span></span>
<span class="r-in"><span>  <span class="op">}</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year D1.PCGDP L1.D1.PCGDP L2.D1.PCGDP L10D1.PCGDP L1.L10D1.PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA          NA          NA          NA             NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L2.L10D1.PCGDP D1.LIFEEX L1.D1.LIFEEX L2.D1.LIFEEX L10D1.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             NA        NA           NA           NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.L10D1.LIFEEX L2.L10D1.LIFEEX D1.GINI L1.D1.GINI L2.D1.GINI L10D1.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              NA              NA      NA         NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.L10D1.GINI L2.L10D1.GINI D1.ODA L1.D1.ODA L2.D1.ODA L10D1.ODA L1.L10D1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            NA            NA     NA        NA        NA        NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L2.L10D1.ODA PCGDP L1.PCGDP L2.PCGDP LIFEEX L1.LIFEEX L2.LIFEEX GINI L1.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           NA    NA       NA       NA 32.446        NA        NA   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L2.GINI       ODA L1.ODA L2.ODA W.PCGDP L1.W.PCGDP L2.W.PCGDP  W.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      NA 116769997     NA     NA      NA         NA         NA -16.75117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.W.LIFEEX L2.W.LIFEEX W.GINI L1.W.GINI L2.W.GINI       W.ODA L1.W.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA          NA     NA        NA        NA -1370778502       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L2.W.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 5 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With ftransform, can also easily do one or more grouped mutations on the fly..</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ftransform.html">settransform</a></span><span class="op">(</span><span class="va">wlddev</span>, median_ODA <span class="op">=</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">ODA</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span>, TRA <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="ftransform.html">settransform</a></span><span class="op">(</span><span class="va">wlddev</span>, sd_ODA <span class="op">=</span> <span class="fu"><a href="fvar_fsd.html">fsd</a></span><span class="op">(</span><span class="va">ODA</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span>, TRA <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     mean_GDP <span class="op">=</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">PCGDP</span>, <span class="va">country</span>, TRA <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span><span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>median_ODA <span class="op">=</span> <span class="va">ODA</span>, median_GDP <span class="op">=</span> <span class="va">PCGDP</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                               <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span>, TRA <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># On a groped data frame it is also possible to grouped transform certain columns</span></span></span>
<span class="r-in"><span><span class="co"># but perform aggregate operatins on others:</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span>gmedian_GDP <span class="op">=</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">PCGDP</span>, <span class="fu"><a href="GRP.html">GRP</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, TRA <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               omedian_GDP <span class="op">=</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">PCGDP</span>, TRA <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span>,  <span class="co"># "replace" preserves NA's</span></span></span>
<span class="r-in"><span>               omedian_GDP_fill <span class="op">=</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        country iso3c       date year decade             region</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13171 Zimbabwe   ZWE 2016-01-01 2015   2010 Sub-Saharan Africa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13172 Zimbabwe   ZWE 2017-01-01 2016   2010 Sub-Saharan Africa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13173 Zimbabwe   ZWE 2018-01-01 2017   2010 Sub-Saharan Africa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    income  OECD    PCGDP LIFEEX GINI       ODA      POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13171 Lower middle income FALSE 1234.103 59.534   NA 817729980 13814629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13172 Lower middle income FALSE 1224.310 60.294   NA 687659973 14030390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13173 Lower middle income FALSE 1263.321 60.812 44.3 753909973 14236745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       median_ODA    sd_ODA mean_GDP median_GDP gmedian_GDP omedian_GDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13171  280630005 694376321 1219.436   1336.053    1336.053    3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13172  280630005 694376321 1219.436   1336.053    1336.053    3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13173  280630005 694376321 1219.436   1336.053    1336.053    3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       omedian_GDP_fill</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13171         3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13172         3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13173         3767.162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## For multi-type data aggregation, the function collap() offers ease and flexibility</span></span></span>
<span class="r-in"><span><span class="co"># Aggregate this data by country and decade: Numeric columns with mean, categorical with mode</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="collap.html">collap</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">decade</span>, <span class="va">fmean</span>, <span class="va">fmode</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date   year decade     region     income  OECD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1961-01-01 1964.5   1960 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1971-01-01 1974.5   1970 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1981-01-01 1984.5   1980 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 1991-01-01 1994.5   1990 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   AFG 2001-01-01 2004.5   2000 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     PCGDP  LIFEEX GINI        ODA      POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      NA 34.6908   NA  222288999  9886773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      NA 39.9053   NA  236169998 12451803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      NA 46.4176   NA   71666001 12291854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      NA 53.0097   NA  317255000 16931903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 379.373 58.0881   NA 3054051961 24870022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># taking weighted mean and weighted mode:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="collap.html">collap</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">decade</span>, <span class="va">fmean</span>, <span class="va">fmode</span>, w <span class="op">=</span> <span class="op">~</span> <span class="va">POP</span>, wFUN <span class="op">=</span> <span class="va">fsum</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country iso3c       date     year decade     region     income  OECD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan   AFG 1970-01-01 1964.675   1960 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan   AFG 1980-01-01 1974.672   1970 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan   AFG 1981-01-01 1984.364   1980 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan   AFG 2000-01-01 1994.941   1990 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan   AFG 2010-01-01 2004.788   2000 South Asia Low income FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PCGDP   LIFEEX GINI        ODA       POP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       NA 34.77716   NA  223006447  98867731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       NA 40.00367   NA  236798314 124518028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       NA 46.32098   NA   70613923 122918537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       NA 53.25897   NA  306818649 169319030</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 382.5583 58.23630   NA 3240143310 248700217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multi-function aggregation of certain columns</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="collap.html">collap</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">decade</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fmean</span>, <span class="va">fmedian</span>, <span class="va">fsd</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ffirst</span>, <span class="va">flast</span><span class="op">)</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country ffirst.date flast.date decade fmean.PCGDP fmedian.PCGDP fsd.PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan  1961-01-01 1970-01-01   1960          NA            NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan  1971-01-01 1980-01-01   1970          NA            NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan  1981-01-01 1990-01-01   1980          NA            NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan  1991-01-01 2000-01-01   1990          NA            NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fmean.LIFEEX fmedian.LIFEEX fsd.LIFEEX fmean.GINI fmedian.GINI fsd.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      34.6908        34.7055   1.490964         NA           NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      39.9053        39.8430   1.738383         NA           NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      46.4176        46.4005   2.161460         NA           NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      53.0097        53.1200   1.695424         NA           NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fmean.ODA fmedian.ODA   fsd.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 222288999   234900002  80884369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 236169998   246509995  34241008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  71666001    48539999  72958531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 317255000   285175003 160500141</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 2 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Customized Aggregation: Assign columns to functions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="collap.html">collap</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span> <span class="op">+</span> <span class="va">decade</span>,</span></span>
<span class="r-in"><span>            custom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fmean <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">10</span>, fsd <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, flast <span class="op">=</span> <span class="fl">3</span>, ffirst <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country flast.date decade ffirst.region ffirst.income ffirst.OECD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1970-01-01   1960    South Asia    Low income       FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1980-01-01   1970    South Asia    Low income       FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1990-01-01   1980    South Asia    Low income       FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 2000-01-01   1990    South Asia    Low income       FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 2010-01-01   2000    South Asia    Low income       FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fmean.PCGDP fsd.PCGDP fmean.LIFEEX fsd.LIFEEX fsd.GINI    fsd.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA        NA      34.6908   1.490964       NA   80884369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA        NA      39.9053   1.738383       NA   34241008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          NA        NA      46.4176   2.161460       NA   72958531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          NA        NA      53.0097   1.695424       NA  160500141</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     379.373  53.66524      58.0881   1.565630       NA 2013110021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For grouped data frames use collapg</span></span></span>
<span class="r-in"><span><span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsubset.html">fsubset</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span>, <span class="va">country</span>, <span class="va">region</span>, <span class="va">income</span>, <span class="va">PCGDP</span><span class="op">:</span><span class="va">ODA</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="collap.html">collapg</a></span><span class="op">(</span><span class="va">fmean</span>, <span class="va">ffirst</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ftransform.html">ftransform</a></span><span class="op">(</span>AMGDP <span class="op">=</span> <span class="va">PCGDP</span> <span class="op">&gt;</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">PCGDP</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">income</span><span class="op">)</span>, TRA <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             AMODA <span class="op">=</span> <span class="va">ODA</span> <span class="op">&gt;</span> <span class="fu"><a href="fnth_fmedian.html">fmedian</a></span><span class="op">(</span><span class="va">ODA</span>, <span class="va">income</span>, TRA <span class="op">=</span> <span class="st">"replace_fill"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          country                     region              income      PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Afghanistan                 South Asia          Low income   483.8351</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        Albania      Europe &amp; Central Asia Upper middle income  3127.1510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        Algeria Middle East &amp; North Africa Upper middle income  4056.4341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 American Samoa        East Asia &amp; Pacific Upper middle income 10071.0659</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        Andorra      Europe &amp; Central Asia         High income 40768.8453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         Angola         Sub-Saharan Africa Lower middle income  2876.5065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     LIFEEX     GINI        ODA AMGDP AMODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 58.32283       NA 2888193791 FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 75.19266 31.41111  343797587 FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 72.57717 31.45000  287459654 FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       NA       NA         NA  TRUE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       NA       NA         NA  TRUE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 51.59572 48.66667  412104483  TRUE FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Additional flexibility for data transformation tasks is offerend by tidy transformation operators</span></span></span>
<span class="r-in"><span><span class="co"># Within-transformation (centering on overall mean)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, mean <span class="op">=</span> <span class="st">"overall.mean"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country W.PCGDP W.LIFEEX W.GINI      W.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan      NA 47.54514     NA -916058371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan      NA 48.06114     NA -800748366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan      NA 48.57014     NA -919988371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan      NA 49.07014     NA -795108366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan      NA 49.56214     NA -736908354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan      NA 50.04714     NA -690988371</span>
<span class="r-in"><span><span class="co"># Partialling out country and year fixed effects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">HDW</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span> <span class="op">+</span> <span class="va">LIFEEX</span> <span class="op">~</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   HDW.PCGDP HDW.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1578.6211 -1.3980224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1412.8849 -1.1838196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  917.2033 -1.0547978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  627.8605 -0.8296048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  168.0458 -0.6683027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -234.9535 -0.4708428</span>
<span class="r-in"><span><span class="co"># Same, adding ODA as continuous regressor</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">HDW</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span> <span class="op">+</span> <span class="va">LIFEEX</span> <span class="op">~</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="qF.html">qF</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">+</span> <span class="va">ODA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   HDW.PCGDP HDW.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -324.3991 -1.1765307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -439.5404 -0.9751559</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -598.9266 -0.7835446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  100.2175 -0.6186010</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -70.7664 -0.4966332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  330.3561 -0.2257800</span>
<span class="r-in"><span><span class="co"># Standardizing (scaling and centering) by country</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">STD</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">country</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan        NA  -1.653181       NA -0.6498451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan        NA  -1.602256       NA -0.5951801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan        NA  -1.552023       NA -0.6517082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan        NA  -1.502678       NA -0.5925063</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan        NA  -1.454122       NA -0.5649154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan        NA  -1.406257       NA -0.5431461</span>
<span class="r-in"><span><span class="co"># Computing 1 lead and 3 lags of the 4 series</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="flag.html">L</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">~</span> <span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP F1.LIFEEX LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA    NA       NA       NA       NA    32.962 32.446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA    NA       NA       NA       NA    33.471 32.962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA    NA       NA       NA       NA    33.971 33.471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI L1.GINI L2.GINI L3.GINI    F1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA        NA        NA      NA   NA      NA      NA      NA 232080002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    32.446        NA        NA      NA   NA      NA      NA      NA 112839996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    32.962    32.446        NA      NA   NA      NA      NA      NA 237720001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ODA    L1.ODA    L2.ODA L3.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 116769997        NA        NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 232080002 116769997        NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 112839996 232080002 116769997     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span><span class="co"># Computing the 1- and 10-year first differences</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">D</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span>, <span class="op">~</span> <span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year D1.PCGDP L10D1.PCGDP D1.LIFEEX L10D1.LIFEEX D1.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA          NA        NA           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA          NA     0.516           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA          NA     0.509           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963       NA          NA     0.500           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964       NA          NA     0.492           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965       NA          NA     0.485           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L10D1.GINI     D1.ODA L10D1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         NA         NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         NA  115310005        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         NA -119240005        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         NA  124880005        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         NA   58200012        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         NA   45919983        NA</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">D</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">~</span> <span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span>     <span class="co"># ..first and second differences</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year D1.PCGDP D2.PCGDP L10D1.PCGDP L10D2.PCGDP D1.LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA       NA          NA          NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA       NA          NA          NA     0.516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA       NA          NA          NA     0.509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   D2.LIFEEX L10D1.LIFEEX L10D2.LIFEEX D1.GINI D2.GINI L10D1.GINI L10D2.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA           NA           NA      NA      NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        NA           NA           NA      NA      NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    -0.007           NA           NA      NA      NA         NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       D1.ODA     D2.ODA L10D1.ODA L10D2.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         NA         NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  115310005         NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -119240005 -234550011        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span><span class="co"># Computing the 1- and 10-year growth rates</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fgrowth.html">G</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span>, <span class="op">~</span> <span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year G1.PCGDP L10G1.PCGDP G1.LIFEEX L10G1.LIFEEX G1.GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA          NA        NA           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA          NA  1.590335           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA          NA  1.544202           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963       NA          NA  1.493830           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964       NA          NA  1.448294           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965       NA          NA  1.407306           NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L10G1.GINI    G1.ODA L10G1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         NA  98.74969        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         NA -51.37884        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         NA 110.66998        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         NA  24.48259        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         NA  15.51770        NA</span>
<span class="r-in"><span><span class="co"># Adding growth rate variables to dataset</span></span></span>
<span class="r-in"><span><span class="fu"><a href="select_replace_vars.html">add_vars</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="fgrowth.html">G</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fl">1</span>, <span class="op">~</span> <span class="va">country</span>, <span class="op">~</span><span class="va">year</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span>, keep.ids <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="select_replace_vars.html">get_vars</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="st">"G1."</span>, regex <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Deleting again</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># These operators can conveniently be used in regression formulas:</span></span></span>
<span class="r-in"><span><span class="co"># Using a Mundlak (1978) procedure to estimate the effect of OECD on LIFEEX, controlling for PCGDP</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">LIFEEX</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span> <span class="op">+</span> <span class="va">OECD</span> <span class="op">+</span> <span class="fu"><a href="fbetween_fwithin.html">B</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span>, <span class="va">country</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   <span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">OECD</span>, <span class="va">PCGDP</span>, <span class="va">LIFEEX</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="efficient-programming.html">na_omit</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = LIFEEX ~ log(PCGDP) + OECD + B(log(PCGDP), country), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data = na_omit(fselect(wlddev, country, OECD, PCGDP, LIFEEX)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            (Intercept)              log(PCGDP)                OECDTRUE  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               19.32590                 8.20551                 0.02478  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B(log(PCGDP), country)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               -2.65428  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adding 10-year lagged life-expectancy to allow for some convergence effects (dynamic panel model)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">LIFEEX</span> <span class="op">~</span> <span class="fu"><a href="flag.html">L</a></span><span class="op">(</span><span class="va">LIFEEX</span>, <span class="fl">10</span>, <span class="va">country</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span> <span class="op">+</span> <span class="va">OECD</span> <span class="op">+</span> <span class="fu"><a href="fbetween_fwithin.html">B</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span>, <span class="va">country</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   <span class="va">wlddev</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">OECD</span>, <span class="va">PCGDP</span>, <span class="va">LIFEEX</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="efficient-programming.html">na_omit</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = LIFEEX ~ L(LIFEEX, 10, country) + log(PCGDP) + OECD + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     B(log(PCGDP), country), data = na_omit(fselect(wlddev, country, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     OECD, PCGDP, LIFEEX)))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            (Intercept)  L(LIFEEX, 10, country)              log(PCGDP)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 9.2756                  0.8656                  0.9229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               OECDTRUE  B(log(PCGDP), country)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 0.4158                 -0.6581  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Tranformation functions and operators also support indexed data classes:</span></span></span>
<span class="r-in"><span><span class="va">wldi</span> <span class="op">&lt;-</span> <span class="fu"><a href="indexing.html">findex_by</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">country</span>, <span class="va">year</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span>                      <span class="co"># Country-demeaning</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">wldi</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year W.PCGDP  W.LIFEEX W.GINI       W.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960      NA -16.75117     NA -1370778502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961      NA -16.23517     NA -1255468497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962      NA -15.72617     NA -1374708502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963      NA -15.22617     NA -1249828497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964      NA -14.73417     NA -1191628485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965      NA -14.24917     NA -1145708502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span>, effect <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>          <span class="co"># Time-demeaning</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">wldi</span>, effect <span class="op">=</span> <span class="fl">2</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year W.PCGDP  W.LIFEEX W.GINI      W.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960      NA -21.46606     NA -122241092</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961      NA -21.51241     NA  -37552049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962      NA -21.38618     NA -183366702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963      NA -21.23172     NA  -54896550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964      NA -21.20502     NA   -9633789</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965      NA -21.18163     NA    5438669</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">HDW</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span>                    <span class="co"># Country- and time-demeaning</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fhdbetween_fhdwithin.html">HDW</a></span><span class="op">(</span><span class="va">wldi</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   HDW.PCGDP HDW.LIFEEX HDW.GINI     HDW.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA  -6.706423       NA -1093922188</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        NA  -6.688440       NA -1032355993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        NA  -6.562210       NA -1156945288</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        NA  -6.472079       NA -1046169271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        NA  -6.445378       NA  -996348510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        NA  -6.367659       NA  -983277444</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">STD</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span>                    <span class="co"># Standardizing by country</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fscale.html">STD</a></span><span class="op">(</span><span class="va">wldi</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960        NA  -1.653181       NA -0.6498451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961        NA  -1.602256       NA -0.5951801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962        NA  -1.552023       NA -0.6517082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963        NA  -1.502678       NA -0.5925063</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964        NA  -1.454122       NA -0.5649154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965        NA  -1.406257       NA -0.5431461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="flag.html">L</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span>, <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>                <span class="co"># Panel-lags</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      F1 -- L1 L2 L3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "matrix" "array" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="flag.html">L</a></span><span class="op">(</span><span class="va">wldi</span>, <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP F1.LIFEEX LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA    NA       NA       NA       NA    32.962 32.446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA    NA       NA       NA       NA    33.471 32.962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA    NA       NA       NA       NA    33.971 33.471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI L1.GINI L2.GINI L3.GINI    F1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        NA        NA        NA      NA   NA      NA      NA      NA 232080002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    32.446        NA        NA      NA   NA      NA      NA      NA 112839996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    32.962    32.446        NA      NA   NA      NA      NA      NA 237720001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ODA    L1.ODA    L2.ODA L3.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 116769997        NA        NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 232080002 116769997        NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 112839996 232080002 116769997     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fgrowth.html">G</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span>                      <span class="co"># Panel-Growth rates</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="fgrowth.html">G</a></span><span class="op">(</span><span class="va">wldi</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       country year G1.PCGDP G1.LIFEEX G1.GINI    G1.ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Afghanistan 1960       NA        NA      NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Afghanistan 1961       NA  1.590335      NA  98.74969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Afghanistan 1962       NA  1.544202      NA -51.37884</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Afghanistan 1963       NA  1.493830      NA 110.66998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Afghanistan 1964       NA  1.448294      NA  24.48259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Afghanistan 1965       NA  1.407306      NA  15.51770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Indexed by:  country [1] | year [6 (61)] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">Dlog</a></span><span class="op">(</span><span class="va">PCGDP</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="flag.html">L</a></span><span class="op">(</span><span class="fu"><a href="fdiff.html">Dlog</a></span><span class="op">(</span><span class="va">LIFEEX</span><span class="op">)</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="va">wldi</span><span class="op">)</span>   <span class="co"># Panel data regression</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = Dlog(PCGDP) ~ L(Dlog(LIFEEX), 0:3), data = wldi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            (Intercept)  L(Dlog(LIFEEX), 0:3)--  L(Dlog(LIFEEX), 0:3)L1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.01544                -0.12618                 0.38523  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> L(Dlog(LIFEEX), 0:3)L2  L(Dlog(LIFEEX), 0:3)L3  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.54179                -0.16475  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove all objects used in this example section</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">v</span>, <span class="va">d</span>, <span class="va">w</span>, <span class="va">f</span>, <span class="va">f1</span>, <span class="va">f2</span>, <span class="va">g</span>, <span class="va">mtcarsM</span>, <span class="va">sds</span>, <span class="va">series</span>, <span class="va">wlddev</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

