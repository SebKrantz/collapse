<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fast Grouping / collapse Grouping Objects — GRP • collapse</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Fast Grouping / collapse Grouping Objects — GRP"><meta name="description" content="GRP performs fast, ordered and unordered, groupings of vectors and data frames (or lists of vectors) using radixorderv or group. The output is a list-like object of class 'GRP' which can be printed, plotted and used as an efficient input to all of collapse's fast statistical and transformation functions and operators (see macros .FAST_FUN and .OPERATOR_FUN), as well as to collap, BY and TRA.
fgroup_by is similar to dplyr::group_by but faster and class-agnostic. It creates a grouped data frame with a 'GRP' object attached - for fast dplyr-like programming with collapse's fast functions.
There are also several conversion methods to and from 'GRP' objects. Notable among these is GRP.grouped_df, which returns a 'GRP' object from a grouped data frame created with dplyr::group_by or fgroup_by, and the duo GRP.factor and as_factor_GRP.
gsplit efficiently splits a vector based on a 'GRP' object, and greorder helps to recombine the results. These are the workhorses behind functions like BY, and collap, fsummarise and fmutate when evaluated with base R and user-defined functions."><meta property="og:description" content="GRP performs fast, ordered and unordered, groupings of vectors and data frames (or lists of vectors) using radixorderv or group. The output is a list-like object of class 'GRP' which can be printed, plotted and used as an efficient input to all of collapse's fast statistical and transformation functions and operators (see macros .FAST_FUN and .OPERATOR_FUN), as well as to collap, BY and TRA.
fgroup_by is similar to dplyr::group_by but faster and class-agnostic. It creates a grouped data frame with a 'GRP' object attached - for fast dplyr-like programming with collapse's fast functions.
There are also several conversion methods to and from 'GRP' objects. Notable among these is GRP.grouped_df, which returns a 'GRP' object from a grouped data frame created with dplyr::group_by or fgroup_by, and the duo GRP.factor and as_factor_GRP.
gsplit efficiently splits a vector based on a 'GRP' object, and greorder helps to recombine the results. These are the workhorses behind functions like BY, and collap, fsummarise and fmutate when evaluated with base R and user-defined functions."><meta property="og:image" content="https://sebkrantz.github.io/collapse/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collapse</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.17</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://sebkrantz.github.io/Rblog/">Blog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/collapse_R" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SebKrantz/collapse" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fast Grouping / <em>collapse</em> Grouping Objects</h1>

      <div class="d-none name"><code>GRP.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>GRP</code> performs fast, ordered and unordered, groupings of vectors and data frames (or lists of vectors) using <code><a href="radixorder.html">radixorderv</a></code> or <code><a href="group.html">group</a></code>. The output is a list-like object of class 'GRP' which can be printed, plotted and used as an efficient input to all of <em>collapse</em>'s fast statistical and transformation functions and operators (see macros <code>.FAST_FUN</code> and <code>.OPERATOR_FUN</code>), as well as to <code><a href="collap.html">collap</a></code>, <code><a href="BY.html">BY</a></code> and <code><a href="TRA.html">TRA</a></code>.</p>
<p><code>fgroup_by</code> is similar to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> but faster and class-agnostic. It creates a grouped data frame with a 'GRP' object attached - for fast dplyr-like programming with <em>collapse</em>'s fast functions.</p>
<p>There are also several conversion methods to and from 'GRP' objects. Notable among these is <code>GRP.grouped_df</code>, which returns a 'GRP' object from a grouped data frame created with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> or <code>fgroup_by</code>, and the duo <code>GRP.factor</code> and <code>as_factor_GRP</code>.</p>
<p><code>gsplit</code> efficiently splits a vector based on a 'GRP' object, and <code>greorder</code> helps to recombine the results. These are the workhorses behind functions like <code><a href="BY.html">BY</a></code>, and <code><a href="collap.html">collap</a></code>, <code><a href="fsummarise.html">fsummarise</a></code> and <code><a href="ftransform.html">fmutate</a></code> when evaluated with base R and user-defined functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, by <span class="op">=</span> <span class="cn">NULL</span>, sort <span class="op">=</span> <span class="va">.op</span><span class="op">[[</span><span class="st">"sort"</span><span class="op">]</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span>, na.last <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    return.groups <span class="op">=</span> <span class="cn">TRUE</span>, return.order <span class="op">=</span> <span class="va">sort</span>, method <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>    call <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'factor'</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, <span class="va">...</span>, group.sizes <span class="op">=</span> <span class="cn">TRUE</span>, drop <span class="op">=</span> <span class="cn">FALSE</span>, return.groups <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    call <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'qG'</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, <span class="va">...</span>, group.sizes <span class="op">=</span> <span class="cn">TRUE</span>, return.groups <span class="op">=</span> <span class="cn">TRUE</span>, call <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'pseries'</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, effect <span class="op">=</span> <span class="fl">1L</span>, <span class="va">...</span>, group.sizes <span class="op">=</span> <span class="cn">TRUE</span>, return.groups <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    call <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'pdata.frame'</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, effect <span class="op">=</span> <span class="fl">1L</span>, <span class="va">...</span>, group.sizes <span class="op">=</span> <span class="cn">TRUE</span>, return.groups <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    call <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'grouped_df'</span></span>
<span><span class="fu">GRP</span><span class="op">(</span><span class="va">X</span>, <span class="va">...</span>, return.groups <span class="op">=</span> <span class="cn">TRUE</span>, call <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Identify 'GRP' objects</span></span>
<span><span class="fu">is_GRP</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'GRP'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>                          <span class="co"># Length of data being grouped</span></span>
<span><span class="fu">GRPN</span><span class="op">(</span><span class="va">x</span>, expand <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>        <span class="co"># Group sizes (default: expanded to match data length)</span></span>
<span><span class="fu">GRPid</span><span class="op">(</span><span class="va">x</span>, sort <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span>        <span class="co"># Group id (data length, same as GRP(.)$group.id)</span></span>
<span><span class="fu">GRPnames</span><span class="op">(</span><span class="va">x</span>, force.char <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span>  <span class="co"># Group names</span></span>
<span></span>
<span><span class="fu">as_factor_GRP</span><span class="op">(</span><span class="va">x</span>, ordered <span class="op">=</span> <span class="cn">FALSE</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="co"># 'GRP'-object to (ordered) factor conversion</span></span>
<span></span>
<span><span class="co"># Efficiently split a vector using a 'GRP' object</span></span>
<span><span class="fu">gsplit</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, use.g.names <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Efficiently reorder y = unlist(gsplit(x, g)) such that identical(greorder(y, g), x)</span></span>
<span><span class="fu">greorder</span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fast, class-agnostic pendant to dplyr::group_by for use with fast functions, see details</span></span>
<span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">.X</span>, <span class="va">...</span>, sort <span class="op">=</span> <span class="va">.op</span><span class="op">[[</span><span class="st">"sort"</span><span class="op">]</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span>, na.last <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          return.groups <span class="op">=</span> <span class="cn">TRUE</span>, return.order <span class="op">=</span> <span class="va">sort</span>, method <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span><span class="co"># Standard-evaluation analogue (slim wrapper around GRP.default(), for programming)</span></span>
<span><span class="fu">group_by_vars</span><span class="op">(</span><span class="va">X</span>, by <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># Shorthand for fgroup_by</span></span>
<span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/GRP.html">gby</a></span><span class="op">(</span><span class="va">.X</span>, <span class="va">...</span>, sort <span class="op">=</span> <span class="va">.op</span><span class="op">[[</span><span class="st">"sort"</span><span class="op">]</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span>, na.last <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    return.groups <span class="op">=</span> <span class="cn">TRUE</span>, return.order <span class="op">=</span> <span class="va">sort</span>, method <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get grouping columns from a grouped data frame created with dplyr::group_by or fgroup_by</span></span>
<span><span class="fu">fgroup_vars</span><span class="op">(</span><span class="va">X</span>, return <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ungroup grouped data frame created with dplyr::group_by or fgroup_by</span></span>
<span><span class="fu">fungroup</span><span class="op">(</span><span class="va">X</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'GRP'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">6</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'GRP'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, breaks <span class="op">=</span> <span class="st">"auto"</span>, type <span class="op">=</span> <span class="st">"l"</span>, horizontal <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-x">X<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a vector, list of columns or data frame (default method), or a suitable object (conversion / extractor methods).</p></dd>


  <dt id="arg--x">.X<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p>a data frame or list.</p></dd>


  <dt id="arg-x-g">x, g<a class="anchor" aria-label="anchor" href="#arg-x-g"></a></dt>
<dd><p>a 'GRP' object. For <code>gsplit/greorder</code>, <code>x</code> can be a vector of any type, or <code>NULL</code> to return the integer indices of the groups. <code>gsplit/greorder/GRPN/GRPid</code> also support vectors or data frames to be passed to <code>g/x</code>.</p></dd>


  <dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>if <code>X</code> is a data frame or list, <code>by</code> can indicate columns to use for the grouping (by default all columns are used). Columns must be passed using a vector of column names, indices, a one-sided formula i.e. <code>~ col1 + col2</code>, a logical vector (converted to indices) or a selector function e.g. <code>is_categorical</code>.</p></dd>


  <dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>logical. If <code>FALSE</code>, groups are not ordered but simply grouped in the order of first appearance of unique elements / rows. This often provides a performance gain if the data was not sorted beforehand. See also <code>method</code>.</p></dd>

  <dt id="arg-ordered">ordered<a class="anchor" aria-label="anchor" href="#arg-ordered"></a></dt>
<dd><p>logical. <code>TRUE</code> adds a class 'ordered' i.e. generates an ordered factor.</p></dd>


  <dt id="arg-decreasing">decreasing<a class="anchor" aria-label="anchor" href="#arg-decreasing"></a></dt>
<dd><p>logical. Should the sort order be increasing or decreasing? Can be a vector of length equal to the number of arguments in <code>X</code> / <code>by</code> (argument passed to <code><a href="radixorder.html">radixorderv</a></code>).</p></dd>


  <dt id="arg-na-last">na.last<a class="anchor" aria-label="anchor" href="#arg-na-last"></a></dt>
<dd><p>logical. If missing values are encountered in grouping vector/columns, assign them to the last group (argument passed to <code><a href="radixorder.html">radixorderv</a></code>).</p></dd>


  <dt id="arg-return-groups">return.groups<a class="anchor" aria-label="anchor" href="#arg-return-groups"></a></dt>
<dd><p>logical. Include the unique groups in the created GRP object.</p></dd>


  <dt id="arg-return-order">return.order<a class="anchor" aria-label="anchor" href="#arg-return-order"></a></dt>
<dd><p>logical. If <code>sort = TRUE</code>, include the output from <code><a href="radixorder.html">radixorderv</a></code> in the created GRP object. This brings performance improvements in <code>gsplit</code> (and thus also benefits grouped execution of base R functions).</p></dd>


  <dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character. The algorithm to use for grouping: either <code>"radix"</code>, <code>"hash"</code> or <code>"auto"</code>. <code>"auto"</code> will chose <code>"radix"</code> when <code>sort = TRUE</code>, yielding ordered grouping via <code><a href="radixorder.html">radixorderv</a></code>, and <code>"hash"</code>-based grouping in first-appearance order via <code><a href="group.html">group</a></code> otherwise. It is possibly to put <code>method = "radix"</code> and <code>sort = FALSE</code>, which will group character data in first appearance order but sort numeric data (a good hybrid option). <code>method = "hash"</code> currently does not support any sorting, thus putting <code>sort = TRUE</code> will simply be ignored.</p></dd>


  <dt id="arg-group-sizes">group.sizes<a class="anchor" aria-label="anchor" href="#arg-group-sizes"></a></dt>
<dd><p>logical. <code>TRUE</code> tabulates factor levels using <code><a href="https://rdrr.io/r/base/tabulate.html" class="external-link">tabulate</a></code> to create a vector of group sizes; <code>FALSE</code> leaves that slot empty when converting from factors.</p></dd>


  <dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p>logical. <code>TRUE</code> efficiently drops unused factor levels beforehand using <code><a href="fdroplevels.html">fdroplevels</a></code>.</p></dd>


  <dt id="arg-call">call<a class="anchor" aria-label="anchor" href="#arg-call"></a></dt>
<dd><p>logical. <code>TRUE</code> calls <code><a href="https://rdrr.io/r/base/match.call.html" class="external-link">match.call</a></code> and saves it in the final slot of the GRP object.</p></dd>


  <dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p>logical. <code>TRUE</code> returns a vector the same length as the data. <code>FALSE</code> returns the group sizes (computed in first-appearance-order of groups if <code>x</code> is not already a 'GRP' object).</p></dd>


  <dt id="arg-force-char">force.char<a class="anchor" aria-label="anchor" href="#arg-force-char"></a></dt>
<dd><p>logical. Always output group names as character vector, even if a single numeric vector was passed to <code>GRP.default</code>.</p></dd>


  <dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>character. The separator passed to <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></code> when creating group names from multiple grouping variables by pasting them together.</p></dd>


 <dt id="arg-effect">effect<a class="anchor" aria-label="anchor" href="#arg-effect"></a></dt>
<dd><p><em>plm</em> / indexed data methods: Select which panel identifier should be used as grouping variable. 1L takes the first variable in the <a href="indexing.html">index</a>, 2L the second etc., identifiers can also be passed as a character string. More than one variable can be supplied.</p></dd>


   <dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>an integer or string specifying what <code>fgroup_vars</code> should return. The options are:</p><table class="table table"><tr><td><em> Int. </em></td><td></td><td><em> String </em></td><td></td><td><em> Description </em></td></tr><tr><td>1</td><td></td><td>"data"</td><td></td><td>full grouping columns (default)</td></tr><tr><td>2</td><td></td><td>"unique"</td><td></td><td>unique rows of grouping columns</td></tr><tr><td>3</td><td></td><td>"names"</td><td></td><td>names of grouping columns</td></tr><tr><td>4</td><td></td><td>"indices"</td><td></td><td>integer indices of grouping columns</td></tr><tr><td>5</td><td></td><td>"named_indices"</td><td></td><td>named integer indices of grouping columns</td></tr><tr><td>6</td><td></td><td>"logical"</td><td></td><td>logical selection vector of grouping columns</td></tr><tr><td>7</td><td></td><td>"named_logical"</td><td></td><td>named logical selection vector of grouping columns</td></tr></table><p></p></dd>


  <dt id="arg-use-g-names">use.g.names<a class="anchor" aria-label="anchor" href="#arg-use-g-names"></a></dt>
<dd><p>logical. <code>TRUE</code> returns a named list, like <code><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></code>. <code>FALSE</code> is slightly more efficient.</p></dd>


 </dl><p><!-- %  \item{untibble}{logical. \code{TRUE} also removes classes \code{c("tbl_df", "tbl")} from \code{X}. \code{fgroup_by} attaches an attribute \code{"was.tibble"} indicating if \code{X} was a tibble prior to grouping. The argument thus defaults to \code{TRUE} if this attribute is attached and equal to \code{FALSE}, so that \code{identical(X, X |&gt; fgroup_by(...) |&gt; fungroup())}, regardless of the nature of \code{X}. } --></p>
<p></p>
<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>integer. Number of groups to print out.</p></dd>


  <dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>integer. Number of breaks in the histogram of group-sizes.</p></dd>


  <dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>linetype for plot.</p></dd>


  <dt id="arg-horizontal">horizontal<a class="anchor" aria-label="anchor" href="#arg-horizontal"></a></dt>
<dd><p>logical. <code>TRUE</code> arranges plots next to each other, instead of above each other. <em>Note</em> that the size of each group is only plotted for objects with less than 10,000 groups.</p></dd>


  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>for <code>fgroup_by</code>: unquoted comma-separated column names, sequences of columns, expressions involving columns, and column names, indices, logical vectors or selector functions. See Examples. For <code>group_by_vars</code>, <code>gsplit</code>, <code>greorder</code>, <code>GRPN</code> and <code>GRPid</code>: further arguments passed to <code>GRP</code> (if <code>g/x</code> is not already a 'GRP' object). For example the <code>by</code> argument could be used if a data frame is passed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>GRP</code> is a central function in the <em>collapse</em> package because it provides, in the form of integer vectors, some key pieces of information to efficiently perform grouped operations at the <code>C/C++</code> level.</p>
<p>Most statistical function require information about (1) the number of groups (2) an integer group-id indicating which values / rows belong to which group and (3) information about the size of each group. Provided with these, <em>collapse</em>'s <a href="fast-statistical-functions.html">Fast Statistical Functions</a> pre-allocate intermediate and result vectors of the right sizes and (in most cases) perform grouped statistical computations in a single pass through the data.</p>
<p>The sorting functionality of <code>GRP.default</code> lets groups receive different integer-id's depending on whether the groups are sorted <code>sort = TRUE</code> (<code>FALSE</code> gives first-appearance order), and in which order (argument <code>decreasing</code>). This affects the order of values/rows in the output whenever an aggregation is performed. <!-- % \emph{Note} that \code{sort = FALSE} is only effective on character vectors, numeric grouping vectors will always produce ordered groupings. --></p>

<p>Other elements in the object provide information about whether the data was sorted by the variables defining the grouping (6) and the ordering vector (7). These also feed into optimizations in <code>gsplit/greorder</code> that benefit the execution of base R functions across groups.</p>
<p>Complimentary to <code>GRP</code>, the function <code>fgroup_by</code> is a significantly faster and class-agnostic alternative to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code> for programming with <em>collapse</em>. It creates a grouped data frame with a 'GRP' object attached in a <code>"groups"</code> attribute. This data frame has classes 'GRP_df', ..., 'grouped_df' and 'data.frame', where ... stands for any other classes the input frame inherits such as 'data.table', 'sf', 'tbl_df', 'indexed_frame' etc.. <em>collapse</em> functions with a 'grouped_df' method respond to 'grouped_df' objects created with either <code>fgroup_by</code> or <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code>. The method <code>GRP.grouped_df</code> takes the <code>"groups"</code> attribute from a 'grouped_df' and converts it to a 'GRP' object if created with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by</a></code>. <!-- %If the grouped data frame was generated using \code{fgroup_by}, all work is done already. If it was created using \code{dplyr::group_by}, a C routine is called to efficiently convert the grouping object. --></p>
<p>The 'GRP_df' class in front responds to <code>print.GRP_df</code> which first calls <code>print(fungroup(x), ...)</code> and prints one line below the object indicating the grouping variables, followed, in square brackets, by some statistics on the group sizes: <code>[N | Mean (SD) Min-Max]</code>. The mean is rounded to a full number and the standard deviation (SD) to one digit. Minimum and maximum are only displayed if the SD is non-zero. There also exist a method <code>[.GRP_df</code> which calls <code><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod</a></code> but makes sure that the grouping information is preserved or dropped depending on the dimensions of the result (subsetting rows or aggregation with <em>data.table</em> drops the grouping object).</p>


<p><code>GRP.default</code> supports vector and list input and will also return 'GRP' objects if passed. There is also a hidden method <code>GRP.GRP</code> which simply returns grouping objects (no re-grouping functionality is offered).</p>
<p>Apart from <code>GRP.grouped_df</code> there are several further conversion methods:</p>
<p>The conversion of factors to 'GRP' objects by <code>GRP.factor</code> involves obtaining the number of groups calling <code>ng &lt;- fnlevels(f)</code> and then computing the count of each level using <code><a href="https://rdrr.io/r/base/tabulate.html" class="external-link">tabulate(f, ng)</a></code>. The integer group-id (2) is already given by the factor itself after removing the levels and class attributes and replacing any missing values with <code>ng + 1L</code>. The levels are put in a list and moved to position (4) in the 'GRP' object, which is reserved for the unique groups. Finally, a sortedness check <code>!is.unsorted(id)</code> is run on the group-id to check if the data represented by the factor was sorted (6). <code>GRP.qG</code> works similarly (see also <code><a href="qF.html">qG</a></code>), and the 'pseries' and 'pdata.frame' methods simply group one or more factors in the <a href="indexing.html">index</a> (selected using the <code>effect</code> argument) .</p>
<p>Creating a factor from a 'GRP' object using <code>as_factor_GRP</code> does not involve any computations, but may involve interacting multiple grouping columns using the <code>paste</code> function to produce unique factor levels. <!-- %  or \code{\link{as.character}} conversions if the grouping column(s) were numeric (which are potentially expensive). --></p>



    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list-like object of class `GRP' containing information about the number of groups, the observations (rows) belonging to each group, the size of each group, the unique group names / definitions, whether the groups are ordered and data grouped is sorted or not, the ordering vector used to perform the ordering and the group start positions. The object is structured as follows:</p><table class="table table"><tr><td><em> List-index </em></td><td></td><td><em> Element-name </em></td><td></td><td><em> Content type </em></td><td></td><td><em> Content description</em></td></tr><tr><td>[[1]]</td><td></td><td>N.groups</td><td></td><td><code>integer(1)</code></td><td></td><td>Number of Groups</td></tr><tr><td>[[2]]</td><td></td><td>group.id</td><td></td><td><code>integer(NROW(X))</code></td><td></td><td>An integer group-identifier</td></tr><tr><td>[[3]]</td><td></td><td>group.sizes</td><td></td><td><code>integer(N.groups)</code></td><td></td><td>Vector of group sizes</td></tr><tr><td>[[4]]</td><td></td><td>groups</td><td></td><td><code>unique(X)</code> or <code>NULL</code></td><td></td><td>Unique groups (same format as input, except for <code>fgroup_by</code> which uses a plain list, sorted if <code>sort = TRUE</code>), or <code>NULL</code> if <code>return.groups = FALSE</code></td></tr><tr><td>[[5]]</td><td></td><td>group.vars</td><td></td><td><code>character</code></td><td></td><td>The names of the grouping variables</td></tr><tr><td>[[6]]</td><td></td><td>ordered</td><td></td><td><code>logical(2)</code></td><td></td><td><code>[1]</code> Whether the groups are ordered: equal to the <code>sort</code> argument in the default method, or <code>TRUE</code> if converted objects inherit a class <code>"ordered"</code> and <code>NA</code> otherwise, <code>[2]</code> Whether the data (<code>X</code>) is already sorted: the result of <code>!is.unsorted(group.id)</code>. If <code>sort = FALSE</code> (default method) the second entry is <code>NA</code>.</td></tr><tr><td>[[7]]</td><td></td><td>order</td><td></td><td><code>integer(NROW(X))</code> or <code>NULL</code></td><td></td><td>Ordering vector from <code>radixorderv</code> (with <code>"starts"</code> attribute), or <code>NULL</code> if <code>return.order = FALSE</code></td></tr><tr><td>[[8]]</td><td></td><td>group.starts</td><td></td><td><code>integer(N.groups)</code> or <code>NULL</code></td><td></td><td>The first-occurrence positions/rows of the groups. Useful e.g. with <code>ffirst(x, g, na.rm = FALSE)</code>. <code>NULL</code> if <code>return.groups = FALSE</code>.</td></tr><tr><td>[[9]]</td><td></td><td>call</td><td></td><td><code><a href="https://rdrr.io/r/base/match.call.html" class="external-link">match.call()</a></code> or <code>NULL</code></td><td></td><td>The <code>GRP()</code> call, obtained from <code><a href="https://rdrr.io/r/base/match.call.html" class="external-link">match.call()</a></code>, or <code>NULL</code> if <code>call = FALSE</code></td></tr></table></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="radixorder.html">radixorder</a></code>, <code><a href="group.html">group</a></code>, <code><a href="qF.html">qF</a></code>, <a href="fast-grouping-ordering.html">Fast Grouping and Ordering</a>, <a href="collapse-documentation.html">Collapse Overview</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## default method</span></span></span>
<span class="r-in"><span><span class="fu">GRP</span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 32 with 3 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.default(X = mtcars$cyl), X is unsorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    7.00    9.00   11.00   10.67   12.50   14.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4  6  8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  7 14 </span>
<span class="r-in"><span><span class="fu">GRP</span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">vs</span> <span class="op">+</span> <span class="va">am</span><span class="op">)</span>       <span class="co"># Or GRP(mtcars, c("cyl","vs","am")) or GRP(mtcars, c(2,8:9))</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 32 with 7 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unsorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.000   2.500   3.000   4.571   5.500  12.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     3     7     3     4    12     2 </span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">GRP</span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">vs</span> <span class="op">+</span> <span class="va">am</span><span class="op">)</span>  <span class="co"># Saving the object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                           <span class="co"># Printing it</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 32 with 7 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unsorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.000   2.500   3.000   4.571   5.500  12.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     3     7     3     4    12     2 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                            <span class="co"># Plotting it</span></span></span>
<span class="r-plt img"><img src="GRP-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">GRPnames</span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                        <span class="co"># Retain group names</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "4.0.1" "4.1.0" "4.1.1" "6.0.1" "6.1.0" "8.0.0" "8.0.1"</span>
<span class="r-in"><span><span class="fu">GRPid</span><span class="op">(</span><span class="va">g</span><span class="op">)</span>                           <span class="co"># Retain group id (same as g$group.id), useful inside fmutate()</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 4 4 3 5 6 5 6 2 2 5 5 6 6 6 6 6 6 3 3 3 2 6 6 6 6 3 1 3 7 4 7 3</span>
<span class="r-in"><span><span class="fu"><a href="fsum.html">fsum</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">g</span><span class="op">)</span>                    <span class="co"># Compute the sum of mtcars, grouped by variables cyl, vs and am</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mpg cyl   disp   hp  drat     wt   qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1  26.0   4  120.3   91  4.43  2.140  16.70  0  1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0  68.7  12  407.6  254 11.31  8.805  62.91  3  0   11    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 198.6  28  628.6  564 29.04 14.198 130.90  7  7   29   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1  61.7  18  465.0  395 11.42  8.265  48.98  0  3   13   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0  76.5  24  818.2  461 13.68 13.555  76.86  4  0   14   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 180.6  96 4291.4 2330 37.45 49.249 205.71  0  0   36   37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span><span class="fu">gsplit</span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, <span class="va">g</span><span class="op">)</span>              <span class="co"># Use the object to split a vector</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24.4 22.8 21.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 22.8 32.4 30.4 33.9 27.3 30.4 21.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 21.0 21.0 19.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 21.4 18.1 19.2 17.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 18.7 14.3 16.4 17.3 15.2 10.4 10.4 14.7 15.5 15.2 13.3 19.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 15.8 15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">gsplit</span><span class="op">(</span><span class="cn">NULL</span>, <span class="va">g</span><span class="op">)</span>                    <span class="co"># The indices of the groups</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  8  9 21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  3 18 19 20 26 28 32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1  2 30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  4  6 10 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  5  7 12 13 14 15 16 17 22 23 24 25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[7]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 29 31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>,              <span class="co"># greorder and unlist undo the effect of gsplit</span></span></span>
<span class="r-in"><span>          <span class="fu">greorder</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu">gsplit</span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>, <span class="va">g</span><span class="op">)</span><span class="op">)</span>, <span class="va">g</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Convert factor to GRP object and vice-versa</span></span></span>
<span class="r-in"><span><span class="fu">GRP</span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 150 with 3 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.factor(X = iris$Species), X is sorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      50      50      50      50      50      50 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     setosa versicolor  virginica </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         50         50         50 </span>
<span class="r-in"><span><span class="fu">as_factor_GRP</span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co">## dplyr integration</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">GRP</span><span class="op">(</span><span class="op">)</span>    <span class="co"># Get GRP object from a dplyr grouped tibble</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collapse grouping object of length 32 with 7 ordered groups</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call: GRP.grouped_df(X = group_by(mtcars, cyl, vs, am)), X is unsorted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Distribution of group sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.000   2.500   3.000   4.571   5.500  12.000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Groups with sizes: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     3     7     3     4    12     2 </span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Grouped mean using dplyr grouping</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 7 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cyl    vs    am   mpg  disp    hp  drat    wt  qsec  gear  carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     4     0     1  26   120.   91    4.43  2.14  16.7  5     2   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     4     1     0  22.9 136.   84.7  3.77  2.94  21.0  3.67  1.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     4     1     1  28.4  89.8  80.6  4.15  2.03  18.7  4.14  1.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6     0     1  20.6 155   132.   3.81  2.76  16.3  4.33  4.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     6     1     0  19.1 205.  115.   3.42  3.39  19.2  3.5   2.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>     8     0     0  15.1 358.  194.   3.12  4.10  17.1  3     3.08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>     8     0     1  15.4 326   300.   3.88  3.37  14.6  5     6   </span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">fgroup_by</span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Faster alternative with collapse grouping</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cyl vs am      mpg     disp        hp     drat       wt     qsec     gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   4  0  1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   4  1  0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   4  1  1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   6  0  1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6  1  0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   8  0  0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1.428571</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 4.666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2.500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 3.083333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 1 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">fgroup_by</span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span>            <span class="co"># Print method for grouped data frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 26 rows ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Adding a column of group sizes.</span></span></span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">fgroup_by</span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fsummarise.html">fsummarise</a></span><span class="op">(</span>Sizes <span class="op">=</span> <span class="fu">GRPN</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cyl vs am Sizes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   4  0  1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   4  1  0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   4  1  1     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   6  0  1     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6  1  0     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   8  0  0    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   8  0  1     2</span>
<span class="r-in"><span><span class="co"># Note: can also set_collapse(mask = "n") to use n() instead, see help("collapse-options")</span></span></span>
<span class="r-in"><span><span class="co"># Other usage modes:</span></span></span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu">fgroup_by</span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="ftransform.html">fmutate</a></span><span class="op">(</span>Sizes <span class="op">=</span> <span class="fu">GRPN</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp drat    wt  qsec vs am gear carb Sizes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 27 rows ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </span>
<span class="r-in"><span><span class="va">mtcars</span> <span class="op">|&gt;</span> <span class="fu"><a href="ftransform.html">fmutate</a></span><span class="op">(</span>Sizes <span class="op">=</span> <span class="fu">GRPN</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Same thing, slightly more efficient</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp drat    wt  qsec vs am gear carb Sizes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 27 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Various options for programming and interactive use</span></span></span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Variable</span>, Decade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">Year</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Variable"</span>, <span class="st">"Country"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">is.character</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Country</span><span class="op">:</span><span class="va">Variable</span>, <span class="va">Year</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Country</span><span class="op">:</span><span class="va">Region</span>, Var <span class="op">=</span> <span class="va">Variable</span>, <span class="va">Year</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Note that you can create a grouped data frame without materializing the unique grouping columns</span></span></span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Variable</span>, <span class="va">Country</span>, return.groups <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="ftransform.html">fmutate</a></span><span class="op">(</span><span class="fu"><a href="across.html">across</a></span><span class="op">(</span><span class="va">AGR</span><span class="op">:</span><span class="va">SUM</span>, <span class="va">fscale</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     BWA        SSA Sub-saharan Africa       VA 1963  NA  NA  NA NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRA FIRE GOV OTH SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA   NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 5023 rows ]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grouped by:  Variable, Country  [85 | 59 (7.7) 4-65] </span>
<span class="r-in"><span><span class="fu">fgroup_by</span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Variable</span>, <span class="va">Country</span>, return.groups <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">AGR</span><span class="op">:</span><span class="va">SUM</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           AGR        MIN         MAN          PU         CON         WRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1419.8013   52.08903  1931.76020  101.720936   742.40444  1982.17750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    964.2103   56.03295   235.03321    5.346433   122.78267   281.51638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  17191.3529  206.02389  6991.37096  364.573404  3524.73837  8509.46124</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    188.0574   10.47964    18.05585    3.093238    25.34108    36.32971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    701.9112  101.41742   624.90303   29.358568   296.00226   694.66129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 287744.2384 7049.52662 67143.63401 1606.064456 20851.66641 28908.10661</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            TRA       FIRE         GOV         OTH         SUM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   648.511948  627.79291  2043.47128   992.44753  10542.1770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   115.472843   44.56442          NA   395.56503   2220.5242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2054.373148 4413.54448  5307.28010  5710.26650  54272.9850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     8.362217   15.33622    61.10484    27.60635    393.7666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   258.240876  272.43836          NA  1003.43964   3982.3726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 13928.607381 4929.26308 22669.24815 30990.11860 485820.4737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 79 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Note also that setting sort = FALSE on unsorted data can be much faster... if not required...</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/" class="external-link">microbenchmark</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/GRP.html">gby</a></span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Variable</span>, <span class="va">Country</span><span class="op">)</span>, <span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/GRP.html">gby</a></span><span class="op">(</span><span class="va">GGDC10S</span>, <span class="va">Variable</span>, <span class="va">Country</span>, sort <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>less accurate nanosecond times to avoid potential integer overflows</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unit: microseconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           expr    min      lq     mean  median</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                gby(GGDC10S, Variable, Country) 81.795 83.9885 88.86791 85.5875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  gby(GGDC10S, Variable, Country, sort = FALSE) 28.618 29.7045 31.31088 30.3195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       uq     max neval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  89.5235 295.815   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  32.3080  48.585   100</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>

    </footer></div>





  </body></html>

