<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fast (Grouped, Weighted) Summary Statistics for Cross-Sectional and Panel Data — qsu • collapse</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fast (Grouped, Weighted) Summary Statistics for Cross-Sectional and Panel Data — qsu"><meta property="og:description" content="qsu, shorthand for quick-summary, is an extremely fast summary command inspired by the (xt)summarize command in the STATA statistical software.
It computes a set of 7 statistics (nobs, mean, sd, min, max, skewness and kurtosis) using a numerically stable one-pass method generalized from Welford's Algorithm. Statistics can be computed weighted, by groups, and also within-and between entities (for panel data, see Details)."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" class="external-link">Blog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/collapse_R" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast (Grouped, Weighted) Summary Statistics for Cross-Sectional and Panel Data</h1>
    
    <div class="hidden name"><code>qsu.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>qsu</code>, shorthand for quick-summary, is an extremely fast summary command inspired by the (xt)summarize command in the STATA statistical software.</p>
<p>It computes a set of 7 statistics (nobs, mean, sd, min, max, skewness and kurtosis) using a numerically stable one-pass method generalized from Welford's Algorithm. Statistics can be computed weighted, by groups, and also within-and between entities (for panel data, see Details).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for default</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, g <span class="op">=</span> <span class="cn">NULL</span>, pid <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for matrix</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, g <span class="op">=</span> <span class="cn">NULL</span>, pid <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for data.frame</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, by <span class="op">=</span> <span class="cn">NULL</span>, pid <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, cols <span class="op">=</span> <span class="cn">NULL</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, vlabels <span class="op">=</span> <span class="cn">FALSE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for grouped_df</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, pid <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, vlabels <span class="op">=</span> <span class="cn">FALSE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># Methods for indexed data / compatibility with plm:</span>

<span class="co"># S3 method for pseries</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, g <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, effect <span class="op">=</span> <span class="fl">1L</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for pdata.frame</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, by <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, cols <span class="op">=</span> <span class="cn">NULL</span>, effect <span class="op">=</span> <span class="fl">1L</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, vlabels <span class="op">=</span> <span class="cn">FALSE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># Methods for compatibility with sf:</span>

<span class="co"># S3 method for sf</span>
<span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, by <span class="op">=</span> <span class="cn">NULL</span>, pid <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, cols <span class="op">=</span> <span class="cn">NULL</span>, higher <span class="op">=</span> <span class="cn">FALSE</span>,
    array <span class="op">=</span> <span class="cn">TRUE</span>, vlabels <span class="op">=</span> <span class="cn">FALSE</span>, stable.algo <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>


<span class="co"># S3 method for qsu</span>
<span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, gid <span class="op">=</span> <span class="st">"Group"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># S3 method for qsu</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">4</span>, nonsci.digits <span class="op">=</span> <span class="fl">9</span>, na.print <span class="op">=</span> <span class="st">"-"</span>,
      return <span class="op">=</span> <span class="cn">FALSE</span>, print.gap <span class="op">=</span> <span class="fl">2</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a vector, matrix, data frame, 'indexed_series' ('pseries') or 'indexed_frame' ('pdata.frame').</p></dd>

  <dt>g</dt>
<dd><p>a factor, <code><a href="GRP.html">GRP</a></code> object, atomic vector (internally converted to factor) or a list of vectors / factors (internally converted to a <code><a href="GRP.html">GRP</a></code> object) used to group <code>x</code>.</p></dd>

  <dt>by</dt>
<dd><p><em>(p)data.frame method</em>: Same as <code>g</code>, but also allows one- or two-sided formulas i.e. <code>~ group1 + group2</code> or <code>var1 + var2 ~ group1 + group2</code>. See Examples.</p></dd>

  <dt>pid</dt>
<dd><p>same input as <code>g/by</code>: Specify a panel-identifier to also compute statistics on between- and within- transformed data. Data frame method also supports one- or two-sided formulas, grouped_df method supports expressions evaluated in the data environment. Transformations are taken independently from grouping with <code>g/by</code> (grouped statistics are computed on the transformed data if <code>g/by</code> is also used). However, passing any LHS variables to <code>pid</code> will overwrite any <code>LHS</code> variables passed to <code>by</code>.</p></dd>

  <dt>w</dt>
<dd><p>a vector of (non-negative) weights. Adding weights will compute the weighted mean, sd, skewness and kurtosis, and transform the data using weighted individual means if <code>pid</code> is used. Data frame method supports formula, grouped_df method supports expression.</p></dd>

  <dt>cols</dt>
<dd><p>select columns to summarize using column names, indices, a logical vector or a function (e.g. <code>is.numeric</code>). Two-sided formulas passed to <code>by</code> or <code>pid</code> overwrite <code>cols</code>.</p></dd>


  <dt>higher</dt>
<dd><p>logical. Add higher moments (skewness and kurtosis).</p></dd>

  <dt>array</dt>
<dd><p>logical. If computations have more than 2 dimensions (up to a maximum of 4D: variables, statistics, groups and panel-decomposition) <code>TRUE</code> returns an array, while <code>FALSE</code> returns a (nested) list of matrices.</p></dd>

  <dt>stable.algo</dt>
<dd><p>logical. <code>FALSE</code> uses a faster but less stable method to calculate the standard deviation (see Details of <code><a href="fvar_fsd.html">fsd</a></code>). Only available if <code>w = NULL</code> and <code>higher = FALSE</code>.</p></dd>

  <dt>vlabels</dt>
<dd><p>logical <code>TRUE</code> or a function: to display variable labels in the summary. See Details.</p></dd>

  <dt>effect</dt>
<dd><p><em>plm</em> methods: Select which panel identifier should be used for between and within transformations of the data. 1L takes the first variable in the <a href="indexing.html">index</a>, 2L the second etc.. Index variables can also be called by name using a character string. More than one variable can be supplied.</p></dd>

  <dt>...</dt>
<dd><p>arguments to be passed to or from other methods.</p></dd>

  <dt>gid</dt>
<dd><p>character. Name assigned to the group-id column, when summarising variables by groups.</p></dd>

  <dt>stringsAsFactors</dt>
<dd><p>logical. Make factors from dimension names of 'qsu' array. Same as option to <code><a href="https://rdrr.io/r/base/table.html" class="external-link">as.data.frame.table</a></code>.</p></dd>

  <dt>digits</dt>
<dd><p>the number of digits to print after the comma/dot.</p></dd>

  <dt>nonsci.digits</dt>
<dd><p>the number of digits to print before resorting to scientific notation (default is to print out numbers with up to 9 digits and print larger numbers scientifically).</p></dd>

  <dt>na.print</dt>
<dd><p>character string to substitute for missing values.</p></dd>

  <dt>return</dt>
<dd><p>logical. Don't print but instead return the formatted object.</p></dd>

  <dt>print.gap</dt>
<dd><p>integer. Spacing between printed columns. Passed to <code>print.default</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The algorithm used to compute statistics is well described <a href="https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance" class="external-link">here</a> [see sections <em>Welford's online algorithm</em>, <em>Weighted incremental algorithm</em> and <em>Higher-order statistics</em>. Skewness and kurtosis are calculated as described in <em>Higher-order statistics</em> and are mathematically identical to those implemented in the <em>moments</em> package. Just note that <code>qsu</code> computes the kurtosis (like <code>momens::kurtosis</code>), not the excess-kurtosis (=  kurtosis - 3) defined in <em>Higher-order statistics</em>. The <em>Weighted incremental algorithm</em> described can easily be generalized to higher-order statistics].</p>
<p>Grouped computations specified with <code>g/by</code> are carried out extremely efficiently as in <code>fsum</code> (in a single pass, without splitting the data).</p>
<p>If <code>pid</code> is used, <code>qsu</code> performs a panel-decomposition of each variable and computes 3 sets of statistics: Statistics computed on the 'Overall' (raw) data, statistics computed on the 'Between' - transformed (pid - averaged) data, and statistics computed on the 'Within' - transformed (pid - demeaned) data.</p>
<p>More formally, let <b><code>x</code></b> (bold) be a panel vector of data for <code>N</code> individuals indexed by <code>i</code>, recorded for <code>T</code> periods, indexed by <code>t</code>. <code>xit</code> then denotes a single data-point belonging to individual <code>i</code> in time-period <code>t</code> (<code>t/T</code> must not represent time). Then <code>xi.</code> denotes the average of all values for individual <code>i</code> (averaged over <code>t</code>), and by extension <b><code>xN.</code></b> is the vector (length <code>N</code>) of such averages for all individuals. If no groups are supplied to <code>g/by</code>, the 'Between' statistics are computed on <b><code>xN.</code></b>, the vector of individual averages. (This means that for a non-balanced panel or in the presence of missing values, the 'Overall' mean computed on <b><code>x</code></b> can be slightly different than the 'Between' mean computed on <b><code>xN.</code></b>, and the variance decomposition is not exact). If groups are supplied to <code>g/by</code>, <b><code>xN.</code></b> is expanded to the vector <b><code>xi.</code></b> (length <code>N x T</code>) by replacing each value <code>xit</code> in <b><code>x</code></b> with <code>xi.</code>, while preserving missing values in <b><code>x</code></b>. Grouped Between-statistics are then computed on <b><code>xi.</code></b>, with the only difference that the number of observations ('Between-N') reported for each group is the number of distinct non-missing values of <b><code>xi.</code></b> in each group (not the total number of non-missing values of <b><code>xi.</code></b> in each group, which is already reported in 'Overall-N'). See Examples.</p>
<p>'Within' statistics are always computed on the vector <b><code>x - xi. + x..</code></b>, where <b><code>x..</code></b> is simply the 'Overall' mean computed from <b><code>x</code></b>, which is added back to preserve the level of the data. The 'Within' mean computed on this data will always be identical to the 'Overall' mean. In the summary output, <code>qsu</code> reports not 'N', which would be identical to the 'Overall-N', but 'T', the average number of time-periods of data available for each individual obtained as 'T' = 'Overall-N / 'Between-N'. See Examples.</p>
<p>Apart from 'N/T' and the extrema, the standard-deviations ('SD') computed on between- and within- transformed data are extremely valuable because they indicate how much of the variation in a panel-variable is between-individuals and how much of the variation is within-individuals (over time). At the extremes, variables that have common values across individuals (such as the time-variable(s) 't' in a balanced panel), can readily be identified as individual-invariant because the 'Between-SD' on this variable is 0 and the 'Within-SD' is equal to the 'Overall-SD'. Analogous, time-invariant individual characteristics (such as the individual-id 'i') have a 0 'Within-SD' and a 'Between-SD' equal to the 'Overall-SD'. See Examples.</p>
<p>For data frame methods, if <code>vlabels = TRUE</code>, <code>qsu</code> uses <code>function(x) paste(names(x), setv(vlabels(x), NA, ""), sep = ": ")</code> to combine variable names and labels for display. Alternatively, the user can pass a custom function which will be applied to the data frame, e.g. using <code>vlabels = vlabels</code> just displays the labels. See also <code><a href="small-helpers.html">vlabels</a></code>.</p>
<p><code>qsu</code> comes with its own print method which by default writes out up to 9 digits at 4 decimal places. Larger numbers are printed in scientific format. for numbers between 7 and 9 digits, an apostrophe (') is placed after the 6th digit to designate the millions. Missing values are printed using '-'.</p>
<p>The <em>sf</em> method simply ignores the geometry column.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A vector, matrix, array or list of matrices of summary statistics. All matrices and arrays have a class 'qsu' and a class 'table' attached.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>In weighted summaries, observations with missing or zero weights are skipped, and thus do not affect any of the calculated statistics, including the observation count. This also implies that a logical vector passed to <code>w</code> can be used to efficiently summarize a subset of the data.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Welford, B. P. (1962). Note on a method for calculating corrected sums of squares and products. <em>Technometrics</em>. 4 (3): 419-420. doi:10.2307/1266577.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>If weights <code>w</code> are used together with <code>pid</code>, transformed data is computed using weighted individual means i.e. weighted <b><code>xi.</code></b> and weighted <b><code>x..</code></b>. Weighted statistics are subsequently computed on this weighted-transformed data.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="descr.html">descr</a></code>, <a href="summary-statistics.html">Summary Statistics</a>, <a href="fast-statistical-functions.html">Fast Statistical Functions</a>, <a href="index.html">Collapse Overview</a>  <!-- %% ~~objects to See Also as \code{\link{help}}, ~~~ --></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## World Development Panel Data</span></span>
<span class="r-in"><span class="co"># Simple Summaries -------------------------</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span>                                 <span class="co"># Simple summary</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N         Mean          SD          Min             Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country  13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c    13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date     13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year     13176         1990     17.6075         1960            2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   13176    1985.5738     17.5117         1960            2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region   13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income   13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD     13176            -           -            -               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     9470    12048.778  19077.6416     132.0776      196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   11670      64.2963     11.4764       18.907         85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI      1744      38.5341      9.2006         20.7            65.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA       8608   454'720131  868'712654  -997'679993  2.56715605e+10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP      12919  24'245971.6  102'120674         2833  1.39771500e+09</span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, vlabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>                 <span class="co"># Display variable labels</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                             N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country: Country Name                                                                   13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c: Country Code                                                                     13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date: Date Recorded (Fictitious)                                                        13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year: Year                                                                              13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade: Decade                                                                          13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region: Region                                                                          13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income: Income Level                                                                    13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD: Is OECD Member Country?                                                           13176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP: GDP per capita (constant 2010 US$)                                                9470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX: Life expectancy at birth, total (years)                                         11670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI: Gini index (World Bank estimate)                                                   1744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA: Net official development assistance and official aid received (constant 2018 US$)   8608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP: Population, total                                                                  12919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                Mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country: Country Name                                                                             -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c: Country Code                                                                               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date: Date Recorded (Fictitious)                                                                  -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year: Year                                                                                     1990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade: Decade                                                                            1985.5738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region: Region                                                                                    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income: Income Level                                                                              -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD: Is OECD Member Country?                                                                     -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP: GDP per capita (constant 2010 US$)                                                 12048.778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX: Life expectancy at birth, total (years)                                             64.2963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI: Gini index (World Bank estimate)                                                      38.5341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA: Net official development assistance and official aid received (constant 2018 US$)   454'720131</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP: Population, total                                                                  24'245971.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                 SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country: Country Name                                                                            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c: Country Code                                                                              -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date: Date Recorded (Fictitious)                                                                 -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year: Year                                                                                 17.6075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade: Decade                                                                             17.5117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region: Region                                                                                   -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income: Income Level                                                                             -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD: Is OECD Member Country?                                                                    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP: GDP per capita (constant 2010 US$)                                               19077.6416</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX: Life expectancy at birth, total (years)                                            11.4764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI: Gini index (World Bank estimate)                                                      9.2006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA: Net official development assistance and official aid received (constant 2018 US$)  868'712654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP: Population, total                                                                  102'120674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                 Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country: Country Name                                                                             -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c: Country Code                                                                               -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date: Date Recorded (Fictitious)                                                                  -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year: Year                                                                                     1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade: Decade                                                                                 1960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region: Region                                                                                    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income: Income Level                                                                              -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD: Is OECD Member Country?                                                                     -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP: GDP per capita (constant 2010 US$)                                                  132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX: Life expectancy at birth, total (years)                                              18.907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI: Gini index (World Bank estimate)                                                         20.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA: Net official development assistance and official aid received (constant 2018 US$)  -997'679993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP: Population, total                                                                         2833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country: Country Name                                                                                -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c: Country Code                                                                                  -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date: Date Recorded (Fictitious)                                                                     -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year: Year                                                                                        2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade: Decade                                                                                    2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region: Region                                                                                       -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income: Income Level                                                                                 -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD: Is OECD Member Country?                                                                        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP: GDP per capita (constant 2010 US$)                                                   196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX: Life expectancy at birth, total (years)                                                85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GINI: Gini index (World Bank estimate)                                                            65.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ODA: Net official development assistance and official aid received (constant 2018 US$)  2.56715605e+10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> POP: Population, total                                                                  1.39771500e+09</span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, higher <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>                  <span class="co"># Add skewness and kurtosis</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N         Mean          SD          Min             Max     Skew</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country  13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c    13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date     13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year     13176         1990     17.6075         1960            2020       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   13176    1985.5738     17.5117         1960            2020   0.0326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region   13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income   13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD     13176            -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     9470    12048.778  19077.6416     132.0776      196061.417   3.1276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   11670      64.2963     11.4764       18.907         85.4171  -0.6748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country         -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c           -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year       1.7994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade     1.7917</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     17.1154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX     2.6718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Grouped Summaries ------------------------</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">region</span>, vlabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>       <span class="co"># Statistics by World Bank Region</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , country: Country Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                N  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         2196     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       3538     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   2562     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  1281     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                183     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   488     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2928     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , iso3c: Country Code</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                N  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         2196     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       3538     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   2562     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  1281     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                183     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   488     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2928     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 10 matrix slice(s) ]</span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span> <span class="op">+</span> <span class="va">LIFEEX</span> <span class="op">~</span> <span class="va">income</span><span class="op">)</span>        <span class="co"># Summarize GDP per Capita and Life Expectancy by</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         N        Mean          SD       Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          3179  30280.7283  23847.0483  932.0417  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           1311    597.4053    288.4392  164.3366   1864.7925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  2246   1574.2535    858.7183  144.9863   4818.1922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  2734   4945.3258   2979.5609  132.0776  20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         N     Mean      SD     Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          3831  73.6246  5.6693  42.672  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           1800  49.7301  9.0944  26.172    74.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  2790  58.1481  9.3115  18.907   76.699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  3249  66.6466   7.537  36.535   80.279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">region</span> <span class="op">+</span> <span class="va">income</span>,     <span class="co"># World Bank Income Level</span></span>
<span class="r-in">             cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">10</span>, higher <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>    <span class="co"># Same variables, by both region and income</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/aperm.html" class="external-link">aperm</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span>                                <span class="co"># A different perspective on the same stats</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , East Asia &amp; Pacific.High income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           N        Mean          SD       Min         Max     Skew    Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP   487  26766.9163  14823.5175  932.0417  71992.1517   0.2811  2.5566</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX  664     73.3724       6.659     54.81      85.078  -0.4945  2.6876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , East Asia &amp; Pacific.Lower middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           N       Mean        SD       Min        Max     Skew    Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP   562  1599.4748  895.5278  144.9863  4503.1454   0.4987  3.0945</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX  780    59.1597    9.6542    18.907       75.4  -1.0076  4.1679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , East Asia &amp; Pacific.Upper middle income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           N       Mean         SD       Min         Max     Skew    Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP   418  3561.0911  2468.1843  132.0776  12486.6788   1.4194    4.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX  363    66.9366     5.6713    43.725       77.15  -0.9194  4.8567</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Europe &amp; Central Asia.High income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N        Mean          SD        Min         Max    Skew     Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP   1551  35718.5696  26466.4643  4500.7362  196061.417  2.2834  10.2728</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX  1845     74.8234      4.3845    63.0749     85.4171   0.042   2.1824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Europe &amp; Central Asia.Low income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          N      Mean        SD       Min        Max    Skew    Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP   35  809.4753  336.5425  366.9354  1458.9932   0.426  1.9987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX  60   60.1129     6.147    50.613     71.097  0.3991  1.9875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 18 matrix slice(s) ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># Grouped summary</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘magrittr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:testthat’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     equals, is_less_than, not</span>
<span class="r-in"><span class="va">wlddev</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">PCGDP</span>, <span class="va">LIFEEX</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">qsu</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                N        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                N     Mean       SD      Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1807  65.9445  10.1633   18.907   85.078</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       3046  72.1625   5.7602   45.369  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   2107  68.3486   7.3768   41.762  82.1902</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  1226  66.2508   9.8306   29.919  82.8049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                144  76.2867   3.5734  68.8978  82.0488</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   480  57.5585  11.3004   32.446   78.921</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2860   51.581   8.6876   26.172  74.5146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Panel Data Summaries ---------------------</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, pid <span class="op">=</span> <span class="op">~</span> <span class="va">iso3c</span>, vlabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>   <span class="co"># Adding between and within countries statistics</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , country: Country Name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , date: Date Recorded (Fictitious)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , year: Year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean       SD   Min   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176  1990  17.6075  1960  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216  1990        0  1990  1990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61  1990  17.6075  1960  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , decade: Decade</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T       Mean       SD        Min        Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176  1985.5738  17.5117       1960       2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216  1985.5738        0  1985.5738  1985.5738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61  1985.5738  17.5117       1960       2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , region: Region</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 1 row(s) and 7 matrix slice(s) ]</span>
<span class="r-in"><span class="co"># -&gt; They show amongst other things that year and decade are individual-invariant,</span></span>
<span class="r-in"><span class="co"># that we have GINI-data on only 161 countries, with only 8.42 observations per country on average,</span></span>
<span class="r-in"><span class="co"># and that GDP, LIFEEX and GINI vary more between-countries, but ODA received varies more within</span></span>
<span class="r-in"><span class="co"># countries over time.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Let's do this manually for PCGDP:</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">wlddev</span><span class="op">$</span><span class="va">PCGDP</span></span>
<span class="r-in"><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">wlddev</span><span class="op">$</span><span class="va">iso3c</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># This is the exact variance decomposion</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="fvar_fsd.html">fvar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="fvar_fsd.html">fvar</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">B</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="fvar_fsd.html">fvar</a></span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">W</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># What qsu does is calculate</span></span>
<span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span>Overall <span class="op">=</span> <span class="fu">qsu</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span class="r-in">           Between <span class="op">=</span> <span class="fu">qsu</span><span class="op">(</span><span class="fu"><a href="fmean.html">fmean</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span><span class="op">)</span><span class="op">)</span>, <span class="co"># Aggregation instead of between-transform</span></span>
<span class="r-in">           Within <span class="op">=</span> <span class="fu">qsu</span><span class="op">(</span><span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, mean <span class="op">=</span> <span class="st">"overall.mean"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Same as qsu(W(x, g) + fmean(x))</span></span>
<span class="r-in"><span class="va">r</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">r</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="va">r</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span></span>
<span class="r-in"><span class="fu">print.qsu</span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                N        Mean          SD          Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     9470   12048.778  19077.6416     132.0776  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      206  12962.6054  20189.9007     253.1886   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   45.9709   12048.778   6723.6808  -33504.8721  76767.5254</span>
<span class="r-in"><span class="co"># Proof:</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">x</span>, pid <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T        Mean          SD          Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     9470   12048.778  19077.6416     132.0776  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      206  12962.6054  20189.9007     253.1886   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   45.9709   12048.778   6723.6808  -33504.8721  76767.5254</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Using indexed data:</span></span>
<span class="r-in"><span class="va">wldi</span> <span class="op">&lt;-</span> <span class="fu"><a href="indexing.html">findex_by</a></span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">iso3c</span>, <span class="va">year</span><span class="op">)</span>   <span class="co"># Creating a Indexed Data Frame frame from this data</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wldi</span><span class="op">)</span>                                <span class="co"># Summary for pdata.frame -&gt; qsu(wlddev, pid = ~ iso3c)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , country</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , iso3c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean  SD  Min  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61     -   -    -    -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T  Mean       SD   Min   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176  1990  17.6075  1960  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216  1990        0  1990  1990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within      61  1990  17.6075  1960  2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , decade</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            N/T       Mean       SD        Min        Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall  13176  1985.5738  17.5117       1960       2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between    216  1985.5738        0  1985.5738  1985.5738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 1 row(s) and 8 matrix slice(s) ]</span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span>                          <span class="co"># Default summary for Panel Series</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T        Mean          SD          Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     9470   12048.778  19077.6416     132.0776  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      206  12962.6054  20189.9007     253.1886   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   45.9709   12048.778   6723.6808  -33504.8721  76767.5254</span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="fu"><a href="fgrowth.html">G</a></span><span class="op">(</span><span class="va">wldi</span><span class="op">$</span><span class="va">PCGDP</span><span class="op">)</span><span class="op">)</span>                       <span class="co"># Summarizing GDP growth, see also ?G</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N/T    Mean      SD       Min       Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Overall     9264  2.0762  6.0081  -64.9924  140.3708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between      202  2.0752  1.8684   -7.6806   10.3106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within   45.8614  2.0762   5.785   -67.359  133.0971</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Grouped Panel Data Summaries -------------</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">region</span>, <span class="op">~</span> <span class="va">iso3c</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="co"># Panel-Statistics by region</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Overall, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              N/T        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Between, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             N/T        Mean          SD         Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific          34  10513.2441   12771.742    444.2899  39722.0077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        56  25992.9618   24051.035    809.4753   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    38   7628.4477   8470.9708   1357.3326  77403.7443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   20  13878.4213  17251.6962   1069.6596  64878.4021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                 3    48699.76  18604.4369  35260.4708  74934.5874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8   1235.9256   1488.3669      413.68   6621.5002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           47   1840.0259   2234.3254    253.1886   9922.0052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 10 matrix slice(s) ]</span>
<span class="r-in"><span class="va">psr</span> <span class="op">&lt;-</span> <span class="fu">qsu</span><span class="op">(</span><span class="va">wldi</span>, <span class="op">~</span> <span class="va">region</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>     <span class="co"># Same on indexed data</span></span>
<span class="r-in"><span class="va">psr</span>                                         <span class="co"># -&gt; Gives a 4D array</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Overall, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              N/T        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Between, PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             N/T        Mean          SD         Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific          34  10513.2441   12771.742    444.2899  39722.0077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        56  25992.9618   24051.035    809.4753   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    38   7628.4477   8470.9708   1357.3326  77403.7443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   20  13878.4213  17251.6962   1069.6596  64878.4021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                 3    48699.76  18604.4369  35260.4708  74934.5874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8   1235.9256   1488.3669      413.68   6621.5002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           47   1840.0259   2234.3254    253.1886   9922.0052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 10 matrix slice(s) ]</span>
<span class="r-in"><span class="va">psr</span><span class="op">[</span>,<span class="st">"N/T"</span>,,<span class="op">]</span>                               <span class="co"># Checking out the number of observations:</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between   Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific            1467       34  43.1471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia          2243       56  40.0536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean      1976       38       52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa      842       20     42.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                   180        3       60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                      382        8    47.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa             2380       47  50.6383</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between   Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific            1807       32  56.4688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia          3046       55  55.3818</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean      2107       40   52.675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa     1226       21   58.381</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                   144        3       48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                      480        8       60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa             2860       48  59.5833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between   Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific             154       23   6.6957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia           798       49  16.2857</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean       413       25    16.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa       91       15   6.0667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                    49        2     24.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                       46        7   6.5714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa              193       46   4.1957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between   Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific            1537       31  49.5806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia           787       32  24.5938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="co"># In North america we only have 3 countries, for the GINI we only have 3.91 observations on average</span></span>
<span class="r-in"><span class="co"># for 45 Sub-Saharan-African countries, etc..</span></span>
<span class="r-in"><span class="va">psr</span><span class="op">[</span>,<span class="st">"SD"</span>,,<span class="op">]</span>                                <span class="co"># Considering only standard deviations</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                Overall     Between      Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         14383.5507   12771.742   6615.8248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       26435.1316   24051.035  10971.0483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    8818.5055   8470.9708   2451.2636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  18419.7912  17251.6962   6455.0512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               24196.2855  18604.4369  15470.4609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   1611.2232   1488.3669    617.0934</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           2596.0104   2234.3254    1321.764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between  Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         10.1633   7.6833  6.6528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        5.7602   4.4378  3.6723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    7.3768   4.9199  5.4965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   9.8306    5.922  7.8467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                3.5734   1.3589  3.3049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                  11.3004   5.6158  9.8062</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           8.6876    5.657  6.5933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , GINI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Overall  Between  Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific          5.0318   4.3005  2.6125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        4.5809   4.0611  2.1195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    5.4821   4.0492  3.6955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   5.2073   4.7002  2.2415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                3.6972   3.3563  1.5507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   3.9898   3.0052  2.6244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           8.2003   6.8844  4.4553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , ODA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Overall         Between          Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific             622'847624      457'183279      422'992450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia           568'237036      438'074771      361'916875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="co"># -&gt; In all regions variations in inequality (GINI) between countries are greater than variations</span></span>
<span class="r-in"><span class="co"># in inequality within countries. The opposite is true for Life-Expectancy in all regions apart</span></span>
<span class="r-in"><span class="co"># from Europe, etc..</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Again let's do this manually for PDGCP:</span></span>
<span class="r-in"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>Overall <span class="op">=</span> <span class="va">x</span>,</span>
<span class="r-in">           Between <span class="op">=</span> <span class="fu"><a href="fbetween_fwithin.html">fbetween</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span><span class="op">)</span>,</span>
<span class="r-in">           Within <span class="op">=</span> <span class="fu"><a href="fbetween_fwithin.html">fwithin</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">g</span>, mean <span class="op">=</span> <span class="st">"overall.mean"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">qsu</span><span class="op">(</span><span class="va">d</span>, g <span class="op">=</span> <span class="va">wlddev</span><span class="op">$</span><span class="va">region</span><span class="op">)</span></span>
<span class="r-in"><span class="va">r</span><span class="op">[</span>,<span class="st">"N"</span>,<span class="st">"Between"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="fndistinct.html">fndistinct</a></span><span class="op">(</span><span class="va">g</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span>, <span class="va">wlddev</span><span class="op">$</span><span class="va">region</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="va">r</span><span class="op">[</span>,<span class="st">"N"</span>,<span class="st">"Within"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">r</span><span class="op">[</span>,<span class="st">"N"</span>,<span class="st">"Overall"</span><span class="op">]</span> <span class="op">/</span> <span class="va">r</span><span class="op">[</span>,<span class="st">"N"</span>,<span class="st">"Between"</span><span class="op">]</span></span>
<span class="r-in"><span class="va">r</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Overall</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                N        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Between</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              N        Mean          SD         Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         34  10513.2441   12771.742    444.2899  39722.0077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       56  25992.9618   24051.035    809.4753   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   38   7628.4477   8470.9708   1357.3326  77403.7443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  20  13878.4213  17251.6962   1069.6596  64878.4021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                3    48699.76  18604.4369  35260.4708  74934.5874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   8   1235.9256   1488.3669      413.68   6621.5002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          47   1840.0259   2234.3254    253.1886   9922.0052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 1 matrix slice(s) ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Proof:</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="va">PCGDP</span> <span class="op">~</span> <span class="va">region</span>, <span class="op">~</span> <span class="va">iso3c</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Overall</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              N/T        Mean          SD         Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                180    48699.76  24196.2855  16405.9053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                   382   1235.9256   1611.2232    265.9625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific         71992.1517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia       196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean   88391.3331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa  116232.753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America               113236.091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8476.564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa          20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , Between</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             N/T        Mean          SD         Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> East Asia &amp; Pacific          34  10513.2441   12771.742    444.2899  39722.0077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Europe &amp; Central Asia        56  25992.9618   24051.035    809.4753   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Latin America &amp; Caribbean    38   7628.4477   8470.9708   1357.3326  77403.7443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Middle East &amp; North Africa   20  13878.4213  17251.6962   1069.6596  64878.4021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> North America                 3    48699.76  18604.4369  35260.4708  74934.5874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> South Asia                    8   1235.9256   1488.3669      413.68   6621.5002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sub-Saharan Africa           47   1840.0259   2234.3254    253.1886   9922.0052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 1 matrix slice(s) ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Weighted Summaries -----------------------</span></span>
<span class="r-in"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">wlddev</span><span class="op">)</span></span>
<span class="r-in"><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>                    <span class="co"># Generate random weights</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, w <span class="op">=</span> <span class="va">weights</span>, higher <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>     <span class="co"># Computed weighted mean, SD, skewness and kurtosis</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N         Mean           SD          Min             Max     Skew</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country  13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c    13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date     13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year     13176    1990.0643      19.7605         1960            2020  -0.0189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   13176    1985.6173      19.6786         1960            2020   0.0086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region   13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income   13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD     13176            -            -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     9470   11992.1361   21352.4215     132.0776      196061.417   4.8508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   11670      64.1494      12.9122       18.907         85.4171  -0.9415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country         -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c           -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year       4.3949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade     4.4176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     48.9102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX     6.2313</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"><span class="va">weightsNA</span> <span class="op">&lt;-</span> <span class="va">weights</span>                        <span class="co"># Weights may contain missing values.. inserting 1000</span></span>
<span class="r-in"><span class="va">weightsNA</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, w <span class="op">=</span> <span class="va">weightsNA</span>, higher <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>   <span class="co"># But now these values are removed from all variables</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              N        Mean          SD          Min             Max     Skew</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country  13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c    13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date     13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year     12176   1990.0874     19.7306         1960            2020  -0.0478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade   12176   1985.6323     19.6215         1960            2020  -0.0157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region   13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income   13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD     13176           -           -            -               -        -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP     8754  12088.1223  21640.4877     132.0776      196061.417   4.8745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX   10781     64.1564     12.8624       18.907         85.4171  -0.9479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> country         -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> iso3c           -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> date            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year       4.3334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> decade     4.3577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OECD            -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCGDP       49.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LIFEEX     6.2583</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 3 rows ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Grouped and panel-summaries can also be weighted in the same manner</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Alternative Output Formats ---------------</span></span>
<span class="r-in"><span class="co"># Simple case</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">qsu</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Variable  N       Mean          SD    Min     Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       mpg 32  20.090625   6.0269481 10.400  33.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       cyl 32   6.187500   1.7859216  4.000   8.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      disp 32 230.721875 123.9386938 71.100 472.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        hp 32 146.687500  68.5628685 52.000 335.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      drat 32   3.596563   0.5346787  2.760   4.930</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        wt 32   3.217250   0.9784574  1.513   5.424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      qsec 32  17.848750   1.7869432 14.500  22.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        vs 32   0.437500   0.5040161  0.000   1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        am 32   0.406250   0.4989909  0.000   1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     gear 32   3.687500   0.7378041  3.000   5.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     carb 32   2.812500   1.6152000  1.000   8.000</span>
<span class="r-in"><span class="co"># For matrices can also use qDF/qDT/qTBL to assign custom name and get a character-id</span></span>
<span class="r-in"><span class="fu"><a href="quick-conversion.html">qDF</a></span><span class="op">(</span><span class="fu">qsu</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>, <span class="st">"car"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     car  N       Mean          SD    Min     Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   mpg 32  20.090625   6.0269481 10.400  33.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   cyl 32   6.187500   1.7859216  4.000   8.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  disp 32 230.721875 123.9386938 71.100 472.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    hp 32 146.687500  68.5628685 52.000 335.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  drat 32   3.596563   0.5346787  2.760   4.930</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    wt 32   3.217250   0.9784574  1.513   5.424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  qsec 32  17.848750   1.7869432 14.500  22.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    vs 32   0.437500   0.5040161  0.000   1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    am 32   0.406250   0.4989909  0.000   1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 gear 32   3.687500   0.7378041  3.000   5.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 carb 32   2.812500   1.6152000  1.000   8.000</span>
<span class="r-in"><span class="co"># DF from 3D array: do not combine with aperm(), might introduce wrong column labels</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">stats</span>, gid <span class="op">=</span> <span class="st">"Region_Income"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Variable                             Region_Income    N       Mean         SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    PCGDP           East Asia &amp; Pacific.High income  487 26766.9163 14823.5175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    PCGDP   East Asia &amp; Pacific.Lower middle income  562  1599.4748   895.5278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    PCGDP   East Asia &amp; Pacific.Upper middle income  418  3561.0911  2468.1843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    PCGDP         Europe &amp; Central Asia.High income 1551 35718.5696 26466.4643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    PCGDP          Europe &amp; Central Asia.Low income   35   809.4753   336.5425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    PCGDP Europe &amp; Central Asia.Lower middle income  125  1804.0338   964.3793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    PCGDP Europe &amp; Central Asia.Upper middle income  532  4979.0901  2720.4775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min        Max      Skew      Kurt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  932.0417  71992.152 0.2811494  2.556594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  144.9863   4503.145 0.4987346  3.094502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  132.0776  12486.679 1.4193597  4.889957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 4500.7362 196061.417 2.2834403 10.272790</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  366.9354   1458.993 0.4260281  1.998718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  534.9587   4243.774 0.6385915  2.298402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  700.7008  15190.099 1.0954612  4.170587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 39 rows ]</span>
<span class="r-in"><span class="co"># DF from 4D array: also no aperm()</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">income</span>, <span class="op">~</span> <span class="va">iso3c</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, gid <span class="op">=</span> <span class="st">"Region"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Variable              Region   Trans        N/T       Mean         SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    PCGDP         High income Overall 3179.00000 30280.7283 23847.0483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    PCGDP         High income Between   71.00000 30280.7283 20908.5323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    PCGDP         High income  Within   44.77465 12048.7780 11467.9987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    PCGDP          Low income Overall 1311.00000   597.4053   288.4392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    PCGDP          Low income Between   28.00000   597.4053   243.8219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    PCGDP          Low income  Within   46.82143 12048.7780   154.1039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    PCGDP Lower middle income Overall 2246.00000  1574.2535   858.7183</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    PCGDP Lower middle income Between   47.00000  1574.2535   676.3157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Min        Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    932.0417 196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   5413.4495 141200.380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -33504.8721  76767.525</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    164.3366   1864.793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    253.1886   1357.333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  11606.2382  12698.296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    144.9863   4818.192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    444.2899   2896.868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 16 rows ]</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Output as nested list</span></span>
<span class="r-in"><span class="va">psrl</span> <span class="op">&lt;-</span> <span class="fu">qsu</span><span class="op">(</span><span class="va">wlddev</span>, <span class="op">~</span> <span class="va">income</span>, <span class="op">~</span> <span class="va">iso3c</span>, cols <span class="op">=</span> <span class="fl">9</span><span class="op">:</span><span class="fl">10</span>, array <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">psrl</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PCGDP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PCGDP$Overall</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         N        Mean          SD       Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          3179  30280.7283  23847.0483  932.0417  196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           1311    597.4053    288.4392  164.3366   1864.7925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  2246   1574.2535    858.7183  144.9863   4818.1922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  2734   4945.3258   2979.5609  132.0776  20532.9523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PCGDP$Between</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       N        Mean          SD        Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          71  30280.7283  20908.5323  5413.4495   141200.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           28    597.4053    243.8219   253.1886   1357.3326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  47   1574.2535    676.3157   444.2899   2896.8682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  60   4945.3258   2327.3834   1604.595  13344.5423</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PCGDP$Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            N       Mean          SD          Min         Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          44.7746  12048.778  11467.9987  -33504.8721  76767.5254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           46.8214  12048.778    154.1039   11606.2382   12698.296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  47.7872  12048.778    529.1449   10377.7234  14603.1055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  45.5667  12048.778    1860.395    4846.3834  24883.1246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $LIFEEX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $LIFEEX$Overall</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         N     Mean      SD     Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          3831  73.6246  5.6693  42.672  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           1800  49.7301  9.0944  26.172    74.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  2790  58.1481  9.3115  18.907   76.699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  3249  66.6466   7.537  36.535   80.279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $LIFEEX$Between</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       N     Mean      SD      Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          73  73.6246  3.3499  64.0302  85.4171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income           30  49.7301  4.8321  40.9663   66.945</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  47  58.1481  5.9945  45.7687  71.6078</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income  57  66.6466  4.9955   48.057  74.0504</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $LIFEEX$Within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            N     Mean      SD      Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> High income          52.4795  64.2963  4.5738  42.9381  78.1271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Low income                60  64.2963  7.7045  41.5678  84.4198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lower middle income  59.3617  64.2963  7.1253  32.9068  83.9918</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Upper middle income       57  64.2963  5.6437  41.4342  83.0122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># We can now use unlist2d to create a tidy data frame</span></span>
<span class="r-in"><span class="fu"><a href="unlist2d.html">unlist2d</a></span><span class="op">(</span><span class="va">psrl</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Variable"</span>, <span class="st">"Trans"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="st">"Income"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Variable   Trans              Income    N       Mean         SD       Min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    PCGDP Overall         High income 3179 30280.7283 23847.0483  932.0417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    PCGDP Overall          Low income 1311   597.4053   288.4392  164.3366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    PCGDP Overall Lower middle income 2246  1574.2535   858.7183  144.9863</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    PCGDP Overall Upper middle income 2734  4945.3258  2979.5609  132.0776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    PCGDP Between         High income   71 30280.7283 20908.5323 5413.4495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    PCGDP Between          Low income   28   597.4053   243.8219  253.1886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    PCGDP Between Lower middle income   47  1574.2535   676.3157  444.2899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    PCGDP Between Upper middle income   60  4945.3258  2327.3834 1604.5950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 196061.417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1864.793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   4818.192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  20532.952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 141200.380</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   1357.333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   2896.868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  13344.542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached 'max' / getOption("max.print") -- omitted 16 rows ]</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

